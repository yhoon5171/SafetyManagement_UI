{"ast":null,"code":"'use strict';\n\nvar utils = require('../utils');\n\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar cachedProperty = utils.cachedProperty;\n/**\r\n* @param {EDDSA} eddsa - instance\r\n* @param {Object} params - public/private key parameters\r\n*\r\n* @param {Array<Byte>} [params.secret] - secret seed bytes\r\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\r\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\r\n*\r\n*/\n\nfunction KeyPair(eddsa, params) {\n  this.eddsa = eddsa;\n  this._secret = parseBytes(params.secret);\n  if (eddsa.isPoint(params.pub)) this._pub = params.pub;else this._pubBytes = parseBytes(params.pub);\n}\n\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\n  if (pub instanceof KeyPair) return pub;\n  return new KeyPair(eddsa, {\n    pub: pub\n  });\n};\n\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\n  if (secret instanceof KeyPair) return secret;\n  return new KeyPair(eddsa, {\n    secret: secret\n  });\n};\n\nKeyPair.prototype.secret = function secret() {\n  return this._secret;\n};\n\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\n  return this.eddsa.encodePoint(this.pub());\n});\ncachedProperty(KeyPair, 'pub', function pub() {\n  if (this._pubBytes) return this.eddsa.decodePoint(this._pubBytes);\n  return this.eddsa.g.mul(this.priv());\n});\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\n  var eddsa = this.eddsa;\n  var hash = this.hash();\n  var lastIx = eddsa.encodingLength - 1;\n  var a = hash.slice(0, eddsa.encodingLength);\n  a[0] &= 248;\n  a[lastIx] &= 127;\n  a[lastIx] |= 64;\n  return a;\n});\ncachedProperty(KeyPair, 'priv', function priv() {\n  return this.eddsa.decodeInt(this.privBytes());\n});\ncachedProperty(KeyPair, 'hash', function hash() {\n  return this.eddsa.hash().update(this.secret()).digest();\n});\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\n  return this.hash().slice(this.eddsa.encodingLength);\n});\n\nKeyPair.prototype.sign = function sign(message) {\n  assert(this._secret, 'KeyPair can only verify');\n  return this.eddsa.sign(message, this);\n};\n\nKeyPair.prototype.verify = function verify(message, sig) {\n  return this.eddsa.verify(message, sig, this);\n};\n\nKeyPair.prototype.getSecret = function getSecret(enc) {\n  assert(this._secret, 'KeyPair is public only');\n  return utils.encode(this.secret(), enc);\n};\n\nKeyPair.prototype.getPublic = function getPublic(enc) {\n  return utils.encode(this.pubBytes(), enc);\n};\n\nmodule.exports = KeyPair;","map":{"version":3,"names":["utils","require","assert","parseBytes","cachedProperty","KeyPair","eddsa","params","_secret","secret","isPoint","pub","_pub","_pubBytes","fromPublic","fromSecret","prototype","pubBytes","encodePoint","decodePoint","g","mul","priv","privBytes","hash","lastIx","encodingLength","a","slice","decodeInt","update","digest","messagePrefix","sign","message","verify","sig","getSecret","enc","encode","getPublic","module","exports"],"sources":["D:/BlockchainSafetyManagement/client/node_modules/truffle-contract/node_modules/web3-eth-accounts/node_modules/elliptic/lib/elliptic/eddsa/key.js"],"sourcesContent":["'use strict';\r\n\r\nvar utils = require('../utils');\r\nvar assert = utils.assert;\r\nvar parseBytes = utils.parseBytes;\r\nvar cachedProperty = utils.cachedProperty;\r\n\r\n/**\r\n* @param {EDDSA} eddsa - instance\r\n* @param {Object} params - public/private key parameters\r\n*\r\n* @param {Array<Byte>} [params.secret] - secret seed bytes\r\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\r\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\r\n*\r\n*/\r\nfunction KeyPair(eddsa, params) {\r\n  this.eddsa = eddsa;\r\n  this._secret = parseBytes(params.secret);\r\n  if (eddsa.isPoint(params.pub))\r\n    this._pub = params.pub;\r\n  else\r\n    this._pubBytes = parseBytes(params.pub);\r\n}\r\n\r\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\r\n  if (pub instanceof KeyPair)\r\n    return pub;\r\n  return new KeyPair(eddsa, { pub: pub });\r\n};\r\n\r\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\r\n  if (secret instanceof KeyPair)\r\n    return secret;\r\n  return new KeyPair(eddsa, { secret: secret });\r\n};\r\n\r\nKeyPair.prototype.secret = function secret() {\r\n  return this._secret;\r\n};\r\n\r\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\r\n  return this.eddsa.encodePoint(this.pub());\r\n});\r\n\r\ncachedProperty(KeyPair, 'pub', function pub() {\r\n  if (this._pubBytes)\r\n    return this.eddsa.decodePoint(this._pubBytes);\r\n  return this.eddsa.g.mul(this.priv());\r\n});\r\n\r\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\r\n  var eddsa = this.eddsa;\r\n  var hash = this.hash();\r\n  var lastIx = eddsa.encodingLength - 1;\r\n\r\n  var a = hash.slice(0, eddsa.encodingLength);\r\n  a[0] &= 248;\r\n  a[lastIx] &= 127;\r\n  a[lastIx] |= 64;\r\n\r\n  return a;\r\n});\r\n\r\ncachedProperty(KeyPair, 'priv', function priv() {\r\n  return this.eddsa.decodeInt(this.privBytes());\r\n});\r\n\r\ncachedProperty(KeyPair, 'hash', function hash() {\r\n  return this.eddsa.hash().update(this.secret()).digest();\r\n});\r\n\r\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\r\n  return this.hash().slice(this.eddsa.encodingLength);\r\n});\r\n\r\nKeyPair.prototype.sign = function sign(message) {\r\n  assert(this._secret, 'KeyPair can only verify');\r\n  return this.eddsa.sign(message, this);\r\n};\r\n\r\nKeyPair.prototype.verify = function verify(message, sig) {\r\n  return this.eddsa.verify(message, sig, this);\r\n};\r\n\r\nKeyPair.prototype.getSecret = function getSecret(enc) {\r\n  assert(this._secret, 'KeyPair is public only');\r\n  return utils.encode(this.secret(), enc);\r\n};\r\n\r\nKeyPair.prototype.getPublic = function getPublic(enc) {\r\n  return utils.encode(this.pubBytes(), enc);\r\n};\r\n\r\nmodule.exports = KeyPair;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}