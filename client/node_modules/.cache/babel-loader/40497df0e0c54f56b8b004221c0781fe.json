{"ast":null,"code":"/*\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\n\n/**\r\n * @file contract.js\r\n *\r\n * To initialize a contract use:\r\n *\r\n *  var Contract = require('web3-eth-contract');\r\n *  Contract.setProvider('ws://localhost:8546');\r\n *  var contract = new Contract(abi, address, ...);\r\n *\r\n * @author Fabian Vogelsteller <fabian@ethereum.org>\r\n * @date 2017\r\n */\n\"use strict\";\n\nvar core = require('web3-core');\n\nvar Method = require('web3-core-method');\n\nvar utils = require('web3-utils');\n\nvar Subscription = require('web3-core-subscriptions').subscription;\n\nvar formatters = require('web3-core-helpers').formatters;\n\nvar errors = require('web3-core-helpers').errors;\n\nvar promiEvent = require('web3-core-promievent');\n\nvar abi = require('web3-eth-abi');\n/**\r\n * Should be called to create new contract instance\r\n *\r\n * @method Contract\r\n * @constructor\r\n * @param {Array} jsonInterface\r\n * @param {String} address\r\n * @param {Object} options\r\n */\n\n\nvar Contract = function Contract(jsonInterface, address, options) {\n  var _this = this,\n      args = Array.prototype.slice.call(arguments);\n\n  if (!(this instanceof Contract)) {\n    throw new Error('Please use the \"new\" keyword to instantiate a web3.eth.Contract() object!');\n  }\n\n  this.setProvider = function () {\n    core.packageInit(_this, arguments);\n    _this.clearSubscriptions = _this._requestManager.clearSubscriptions;\n  }; // sets _requestmanager\n\n\n  core.packageInit(this, [this.constructor]);\n  this.clearSubscriptions = this._requestManager.clearSubscriptions;\n\n  if (!jsonInterface || !Array.isArray(jsonInterface)) {\n    throw errors.ContractMissingABIError();\n  } // create the options object\n\n\n  this.options = {};\n  var lastArg = args[args.length - 1];\n\n  if (!!lastArg && typeof lastArg === 'object' && !Array.isArray(lastArg)) {\n    options = lastArg;\n    this.options = { ...this.options,\n      ...this._getOrSetDefaultOptions(options)\n    };\n\n    if (!!address && typeof address === 'object') {\n      address = null;\n    }\n  } // set address\n\n\n  Object.defineProperty(this.options, 'address', {\n    set: function (value) {\n      if (value) {\n        _this._address = utils.toChecksumAddress(formatters.inputAddressFormatter(value));\n      }\n    },\n    get: function () {\n      return _this._address;\n    },\n    enumerable: true\n  }); // add method and event signatures, when the jsonInterface gets set\n\n  Object.defineProperty(this.options, 'jsonInterface', {\n    set: function (value) {\n      _this.methods = {};\n      _this.events = {};\n      _this._jsonInterface = value.map(function (method) {\n        var func, funcName; // make constant and payable backwards compatible\n\n        method.constant = method.stateMutability === \"view\" || method.stateMutability === \"pure\" || method.constant;\n        method.payable = method.stateMutability === \"payable\" || method.payable;\n\n        if (method.name) {\n          funcName = utils._jsonInterfaceMethodToString(method);\n        } // function\n\n\n        if (method.type === 'function') {\n          method.signature = abi.encodeFunctionSignature(funcName);\n          func = _this._createTxObject.bind({\n            method: method,\n            parent: _this\n          }); // add method only if not one already exists\n\n          if (!_this.methods[method.name]) {\n            _this.methods[method.name] = func;\n          } else {\n            var cascadeFunc = _this._createTxObject.bind({\n              method: method,\n              parent: _this,\n              nextMethod: _this.methods[method.name]\n            });\n\n            _this.methods[method.name] = cascadeFunc;\n          } // definitely add the method based on its signature\n\n\n          _this.methods[method.signature] = func; // add method by name\n\n          _this.methods[funcName] = func; // event\n        } else if (method.type === 'event') {\n          method.signature = abi.encodeEventSignature(funcName);\n\n          var event = _this._on.bind(_this, method.signature); // add method only if not already exists\n\n\n          if (!_this.events[method.name] || _this.events[method.name].name === 'bound ') _this.events[method.name] = event; // definitely add the method based on its signature\n\n          _this.events[method.signature] = event; // add event by name\n\n          _this.events[funcName] = event;\n        }\n\n        return method;\n      }); // add allEvents\n\n      _this.events.allEvents = _this._on.bind(_this, 'allevents');\n      return _this._jsonInterface;\n    },\n    get: function () {\n      return _this._jsonInterface;\n    },\n    enumerable: true\n  }); // get default account from the Class\n\n  var defaultAccount = this.constructor.defaultAccount;\n  var defaultBlock = this.constructor.defaultBlock || 'latest';\n  Object.defineProperty(this, 'handleRevert', {\n    get: function () {\n      if (_this.options.handleRevert === false || _this.options.handleRevert === true) {\n        return _this.options.handleRevert;\n      }\n\n      return this.constructor.handleRevert;\n    },\n    set: function (val) {\n      _this.options.handleRevert = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'defaultCommon', {\n    get: function () {\n      return _this.options.common || this.constructor.defaultCommon;\n    },\n    set: function (val) {\n      _this.options.common = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'defaultHardfork', {\n    get: function () {\n      return _this.options.hardfork || this.constructor.defaultHardfork;\n    },\n    set: function (val) {\n      _this.options.hardfork = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'defaultChain', {\n    get: function () {\n      return _this.options.chain || this.constructor.defaultChain;\n    },\n    set: function (val) {\n      _this.options.chain = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'transactionPollingTimeout', {\n    get: function () {\n      if (_this.options.transactionPollingTimeout === 0) {\n        return _this.options.transactionPollingTimeout;\n      }\n\n      return _this.options.transactionPollingTimeout || this.constructor.transactionPollingTimeout;\n    },\n    set: function (val) {\n      _this.options.transactionPollingTimeout = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'transactionPollingInterval', {\n    get: function () {\n      if (_this.options.transactionPollingInterval === 0) {\n        return _this.options.transactionPollingInterval;\n      }\n\n      return _this.options.transactionPollingInterval || this.constructor.transactionPollingInterval;\n    },\n    set: function (val) {\n      _this.options.transactionPollingInterval = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'transactionConfirmationBlocks', {\n    get: function () {\n      if (_this.options.transactionConfirmationBlocks === 0) {\n        return _this.options.transactionConfirmationBlocks;\n      }\n\n      return _this.options.transactionConfirmationBlocks || this.constructor.transactionConfirmationBlocks;\n    },\n    set: function (val) {\n      _this.options.transactionConfirmationBlocks = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'transactionBlockTimeout', {\n    get: function () {\n      if (_this.options.transactionBlockTimeout === 0) {\n        return _this.options.transactionBlockTimeout;\n      }\n\n      return _this.options.transactionBlockTimeout || this.constructor.transactionBlockTimeout;\n    },\n    set: function (val) {\n      _this.options.transactionBlockTimeout = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'blockHeaderTimeout', {\n    get: function () {\n      if (_this.options.blockHeaderTimeout === 0) {\n        return _this.options.blockHeaderTimeout;\n      }\n\n      return _this.options.blockHeaderTimeout || this.constructor.blockHeaderTimeout;\n    },\n    set: function (val) {\n      _this.options.blockHeaderTimeout = val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'defaultAccount', {\n    get: function () {\n      return defaultAccount;\n    },\n    set: function (val) {\n      if (val) {\n        defaultAccount = utils.toChecksumAddress(formatters.inputAddressFormatter(val));\n      }\n\n      return val;\n    },\n    enumerable: true\n  });\n  Object.defineProperty(this, 'defaultBlock', {\n    get: function () {\n      return defaultBlock;\n    },\n    set: function (val) {\n      defaultBlock = val;\n      return val;\n    },\n    enumerable: true\n  }); // properties\n\n  this.methods = {};\n  this.events = {};\n  this._address = null;\n  this._jsonInterface = []; // set getter/setter properties\n\n  this.options.address = address;\n  this.options.jsonInterface = jsonInterface;\n};\n/**\r\n * Sets the new provider, creates a new requestManager, registers the \"data\" listener on the provider and sets the\r\n * accounts module for the Contract class.\r\n *\r\n * @method setProvider\r\n *\r\n * @param {string|provider} provider\r\n * @param {Accounts} accounts\r\n *\r\n * @returns void\r\n */\n\n\nContract.setProvider = function (provider, accounts) {\n  // Contract.currentProvider = provider;\n  core.packageInit(this, [provider]);\n  this._ethAccounts = accounts;\n};\n/**\r\n * Get the callback and modify the array if necessary\r\n *\r\n * @method _getCallback\r\n * @param {Array} args\r\n * @return {Function} the callback\r\n */\n\n\nContract.prototype._getCallback = function getCallback(args) {\n  if (args && !!args[args.length - 1] && typeof args[args.length - 1] === 'function') {\n    return args.pop(); // modify the args array!\n  }\n};\n/**\r\n * Checks that no listener with name \"newListener\" or \"removeListener\" is added.\r\n *\r\n * @method _checkListener\r\n * @param {String} type\r\n * @param {String} event\r\n * @return {Object} the contract instance\r\n */\n\n\nContract.prototype._checkListener = function (type, event) {\n  if (event === type) {\n    throw errors.ContractReservedEventError(type);\n  }\n};\n/**\r\n * Use default values, if options are not available\r\n *\r\n * @method _getOrSetDefaultOptions\r\n * @param {Object} options the options gived by the user\r\n * @return {Object} the options with gaps filled by defaults\r\n */\n\n\nContract.prototype._getOrSetDefaultOptions = function getOrSetDefaultOptions(options) {\n  var gasPrice = options.gasPrice ? String(options.gasPrice) : null;\n  var from = options.from ? utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)) : null;\n  options.data = options.data || this.options.data;\n  options.from = from || this.options.from;\n  options.gasPrice = gasPrice || this.options.gasPrice;\n  options.gas = options.gas || options.gasLimit || this.options.gas; // TODO replace with only gasLimit?\n\n  delete options.gasLimit;\n  return options;\n};\n/**\r\n * Should be used to encode indexed params and options to one final object\r\n *\r\n * @method _encodeEventABI\r\n * @param {Object} event\r\n * @param {Object} options\r\n * @return {Object} everything combined together and encoded\r\n */\n\n\nContract.prototype._encodeEventABI = function (event, options) {\n  options = options || {};\n  var filter = options.filter || {},\n      result = {};\n  ['fromBlock', 'toBlock'].filter(function (f) {\n    return options[f] !== undefined;\n  }).forEach(function (f) {\n    result[f] = formatters.inputBlockNumberFormatter(options[f]);\n  }); // use given topics\n\n  if (Array.isArray(options.topics)) {\n    result.topics = options.topics; // create topics based on filter\n  } else {\n    result.topics = []; // add event signature\n\n    if (event && !event.anonymous && event.name !== 'ALLEVENTS') {\n      result.topics.push(event.signature);\n    } // add event topics (indexed arguments)\n\n\n    if (event.name !== 'ALLEVENTS') {\n      var indexedTopics = event.inputs.filter(function (i) {\n        return i.indexed === true;\n      }).map(function (i) {\n        var value = filter[i.name];\n\n        if (!value) {\n          return null;\n        } // TODO: https://github.com/ethereum/web3.js/issues/344\n        // TODO: deal properly with components\n\n\n        if (Array.isArray(value)) {\n          return value.map(function (v) {\n            return abi.encodeParameter(i.type, v);\n          });\n        }\n\n        return abi.encodeParameter(i.type, value);\n      });\n      result.topics = result.topics.concat(indexedTopics);\n    }\n\n    if (!result.topics.length) delete result.topics;\n  }\n\n  if (this.options.address) {\n    result.address = this.options.address.toLowerCase();\n  }\n\n  return result;\n};\n/**\r\n * Should be used to decode indexed params and options\r\n *\r\n * @method _decodeEventABI\r\n * @param {Object} data\r\n * @return {Object} result object with decoded indexed && not indexed params\r\n */\n\n\nContract.prototype._decodeEventABI = function (data) {\n  var event = this;\n  data.data = data.data || '';\n  data.topics = data.topics || [];\n  var result = formatters.outputLogFormatter(data); // if allEvents get the right event\n\n  if (event.name === 'ALLEVENTS') {\n    event = event.jsonInterface.find(function (intf) {\n      return intf.signature === data.topics[0];\n    }) || {\n      anonymous: true\n    };\n  } // create empty inputs if none are present (e.g. anonymous events on allEvents)\n\n\n  event.inputs = event.inputs || []; // Handle case where an event signature shadows the current ABI with non-identical\n  // arg indexing. If # of topics doesn't match, event is anon.\n\n  if (!event.anonymous) {\n    let indexedInputs = 0;\n    event.inputs.forEach(input => input.indexed ? indexedInputs++ : null);\n\n    if (indexedInputs > 0 && data.topics.length !== indexedInputs + 1) {\n      event = {\n        anonymous: true,\n        inputs: []\n      };\n    }\n  }\n\n  var argTopics = event.anonymous ? data.topics : data.topics.slice(1);\n  result.returnValues = abi.decodeLog(event.inputs, data.data, argTopics);\n  delete result.returnValues.__length__; // add name\n\n  result.event = event.name; // add signature\n\n  result.signature = event.anonymous || !data.topics[0] ? null : data.topics[0]; // move the data and topics to \"raw\"\n\n  result.raw = {\n    data: result.data,\n    topics: result.topics\n  };\n  delete result.data;\n  delete result.topics;\n  return result;\n};\n/**\r\n * Encodes an ABI for a method, including signature or the method.\r\n * Or when constructor encodes only the constructor parameters.\r\n *\r\n * @method _encodeMethodABI\r\n * @param {Mixed} args the arguments to encode\r\n * @param {String} the encoded ABI\r\n */\n\n\nContract.prototype._encodeMethodABI = function _encodeMethodABI() {\n  var methodSignature = this._method.signature,\n      args = this.arguments || [];\n  var signature = false,\n      paramsABI = this._parent.options.jsonInterface.filter(function (json) {\n    return methodSignature === 'constructor' && json.type === methodSignature || (json.signature === methodSignature || json.signature === methodSignature.replace('0x', '') || json.name === methodSignature) && json.type === 'function';\n  }).map(function (json) {\n    var inputLength = Array.isArray(json.inputs) ? json.inputs.length : 0;\n\n    if (inputLength !== args.length) {\n      throw new Error('The number of arguments is not matching the methods required number. You need to pass ' + inputLength + ' arguments.');\n    }\n\n    if (json.type === 'function') {\n      signature = json.signature;\n    }\n\n    return Array.isArray(json.inputs) ? json.inputs : [];\n  }).map(function (inputs) {\n    return abi.encodeParameters(inputs, args).replace('0x', '');\n  })[0] || ''; // return constructor\n\n  if (methodSignature === 'constructor') {\n    if (!this._deployData) throw new Error('The contract has no contract data option set. This is necessary to append the constructor parameters.');\n\n    if (!this._deployData.startsWith('0x')) {\n      this._deployData = '0x' + this._deployData;\n    }\n\n    return this._deployData + paramsABI;\n  } // return method\n\n\n  var returnValue = signature ? signature + paramsABI : paramsABI;\n\n  if (!returnValue) {\n    throw new Error('Couldn\\'t find a matching contract method named \"' + this._method.name + '\".');\n  }\n\n  return returnValue;\n};\n/**\r\n * Decode method return values\r\n *\r\n * @method _decodeMethodReturn\r\n * @param {Array} outputs\r\n * @param {String} returnValues\r\n * @return {Object} decoded output return values\r\n */\n\n\nContract.prototype._decodeMethodReturn = function (outputs, returnValues) {\n  if (!returnValues) {\n    return null;\n  }\n\n  returnValues = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\n  var result = abi.decodeParameters(outputs, returnValues);\n\n  if (result.__length__ === 1) {\n    return result[0];\n  }\n\n  delete result.__length__;\n  return result;\n};\n/**\r\n * Deploys a contract and fire events based on its state: transactionHash, receipt\r\n *\r\n * All event listeners will be removed, once the last possible event is fired (\"error\", or \"receipt\")\r\n *\r\n * @method deploy\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} EventEmitter possible events are \"error\", \"transactionHash\" and \"receipt\"\r\n */\n\n\nContract.prototype.deploy = function (options, callback) {\n  options = options || {};\n  options.arguments = options.arguments || [];\n  options = this._getOrSetDefaultOptions(options); // throw error, if no \"data\" is specified\n\n  if (!options.data) {\n    if (typeof callback === 'function') {\n      return callback(errors.ContractMissingDeployDataError());\n    }\n\n    throw errors.ContractMissingDeployDataError();\n  }\n\n  var constructor = this.options.jsonInterface.find(method => {\n    return method.type === 'constructor';\n  }) || {};\n  constructor.signature = 'constructor';\n  return this._createTxObject.apply({\n    method: constructor,\n    parent: this,\n    deployData: options.data,\n    _ethAccounts: this.constructor._ethAccounts\n  }, options.arguments);\n};\n/**\r\n * Gets the event signature and outputFormatters\r\n *\r\n * @method _generateEventOptions\r\n * @param {Object} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the event options object\r\n */\n\n\nContract.prototype._generateEventOptions = function () {\n  var args = Array.prototype.slice.call(arguments); // get the callback\n\n  var callback = this._getCallback(args); // get the options\n\n\n  var options = (!!args[args.length - 1] && typeof args[args.length - 1]) === 'object' ? args.pop() : {};\n  var eventName = typeof args[0] === 'string' ? args[0] : 'allevents';\n  var event = eventName.toLowerCase() === 'allevents' ? {\n    name: 'ALLEVENTS',\n    jsonInterface: this.options.jsonInterface\n  } : this.options.jsonInterface.find(function (json) {\n    return json.type === 'event' && (json.name === eventName || json.signature === '0x' + eventName.replace('0x', ''));\n  });\n\n  if (!event) {\n    throw errors.ContractEventDoesNotExistError(eventName);\n  }\n\n  if (!utils.isAddress(this.options.address)) {\n    throw errors.ContractNoAddressDefinedError();\n  }\n\n  return {\n    params: this._encodeEventABI(event, options),\n    event: event,\n    callback: callback\n  };\n};\n/**\r\n * Adds event listeners and creates a subscription, and remove it once its fired.\r\n *\r\n * @method clone\r\n * @return {Object} the event subscription\r\n */\n\n\nContract.prototype.clone = function () {\n  return new this.constructor(this.options.jsonInterface, this.options.address, this.options);\n};\n/**\r\n * Adds event listeners and creates a subscription, and remove it once its fired.\r\n *\r\n * @method once\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the event subscription\r\n */\n\n\nContract.prototype.once = function (event, options, callback) {\n  var args = Array.prototype.slice.call(arguments); // get the callback\n\n  callback = this._getCallback(args);\n\n  if (!callback) {\n    throw errors.ContractOnceRequiresCallbackError();\n  } // don't allow fromBlock\n\n\n  if (options) delete options.fromBlock; // don't return as once shouldn't provide \"on\"\n\n  this._on(event, options, function (err, res, sub) {\n    sub.unsubscribe();\n\n    if (typeof callback === 'function') {\n      callback(err, res, sub);\n    }\n  });\n\n  return undefined;\n};\n/**\r\n * Adds event listeners and creates a subscription.\r\n *\r\n * @method _on\r\n *\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n *\r\n * @return {Object} the event subscription\r\n */\n\n\nContract.prototype._on = function () {\n  var subOptions = this._generateEventOptions.apply(this, arguments);\n\n  if (subOptions.params && subOptions.params.toBlock) {\n    delete subOptions.params.toBlock;\n    console.warn('Invalid option: toBlock. Use getPastEvents for specific range.');\n  } // prevent the event \"newListener\" and \"removeListener\" from being overwritten\n\n\n  this._checkListener('newListener', subOptions.event.name);\n\n  this._checkListener('removeListener', subOptions.event.name); // TODO check if listener already exists? and reuse subscription if options are the same.\n  // create new subscription\n\n\n  var subscription = new Subscription({\n    subscription: {\n      params: 1,\n      inputFormatter: [formatters.inputLogFormatter],\n      outputFormatter: this._decodeEventABI.bind(subOptions.event),\n      // DUBLICATE, also in web3-eth\n      subscriptionHandler: function (output) {\n        if (output.removed) {\n          this.emit('changed', output);\n        } else {\n          this.emit('data', output);\n        }\n\n        if (typeof this.callback === 'function') {\n          this.callback(null, output, this);\n        }\n      }\n    },\n    type: 'eth',\n    requestManager: this._requestManager\n  });\n  subscription.subscribe('logs', subOptions.params, subOptions.callback || function () {});\n  return subscription;\n};\n/**\r\n * Get past events from contracts\r\n *\r\n * @method getPastEvents\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the promievent\r\n */\n\n\nContract.prototype.getPastEvents = function () {\n  var subOptions = this._generateEventOptions.apply(this, arguments);\n\n  var getPastLogs = new Method({\n    name: 'getPastLogs',\n    call: 'eth_getLogs',\n    params: 1,\n    inputFormatter: [formatters.inputLogFormatter],\n    outputFormatter: this._decodeEventABI.bind(subOptions.event)\n  });\n  getPastLogs.setRequestManager(this._requestManager);\n  var call = getPastLogs.buildCall();\n  getPastLogs = null;\n  return call(subOptions.params, subOptions.callback);\n};\n/**\r\n * returns the an object with call, send, estimate functions\r\n *\r\n * @method _createTxObject\r\n * @returns {Object} an object with functions to call the methods\r\n */\n\n\nContract.prototype._createTxObject = function _createTxObject() {\n  var args = Array.prototype.slice.call(arguments);\n  var txObject = {};\n\n  if (this.method.type === 'function') {\n    txObject.call = this.parent._executeMethod.bind(txObject, 'call');\n    txObject.call.request = this.parent._executeMethod.bind(txObject, 'call', true); // to make batch requests\n  }\n\n  txObject.send = this.parent._executeMethod.bind(txObject, 'send');\n  txObject.send.request = this.parent._executeMethod.bind(txObject, 'send', true); // to make batch requests\n\n  txObject.encodeABI = this.parent._encodeMethodABI.bind(txObject);\n  txObject.estimateGas = this.parent._executeMethod.bind(txObject, 'estimate');\n  txObject.createAccessList = this.parent._executeMethod.bind(txObject, 'createAccessList');\n\n  if (args && this.method.inputs && args.length !== this.method.inputs.length) {\n    if (this.nextMethod) {\n      return this.nextMethod.apply(null, args);\n    }\n\n    throw errors.InvalidNumberOfParams(args.length, this.method.inputs.length, this.method.name);\n  }\n\n  txObject.arguments = args || [];\n  txObject._method = this.method;\n  txObject._parent = this.parent;\n  txObject._ethAccounts = this.parent.constructor._ethAccounts || this._ethAccounts;\n\n  if (this.deployData) {\n    txObject._deployData = this.deployData;\n  }\n\n  return txObject;\n};\n/**\r\n * Generates the options for the execute call\r\n *\r\n * @method _processExecuteArguments\r\n * @param {Array} args\r\n * @param {Promise} defer\r\n */\n\n\nContract.prototype._processExecuteArguments = function _processExecuteArguments(args, defer) {\n  var processedArgs = {};\n  processedArgs.type = args.shift(); // get the callback\n\n  processedArgs.callback = this._parent._getCallback(args); // get block number to use for call\n\n  if (processedArgs.type === 'call' && args[args.length - 1] !== true && (typeof args[args.length - 1] === 'string' || isFinite(args[args.length - 1]))) processedArgs.defaultBlock = args.pop(); // get the options\n\n  processedArgs.options = (!!args[args.length - 1] && typeof args[args.length - 1]) === 'object' ? args.pop() : {}; // get the generateRequest argument for batch requests\n\n  processedArgs.generateRequest = args[args.length - 1] === true ? args.pop() : false;\n  processedArgs.options = this._parent._getOrSetDefaultOptions(processedArgs.options);\n  processedArgs.options.data = this.encodeABI(); // add contract address\n\n  if (!this._deployData && !utils.isAddress(this._parent.options.address)) throw errors.ContractNoAddressDefinedError();\n  if (!this._deployData) processedArgs.options.to = this._parent.options.address; // return error, if no \"data\" is specified\n\n  if (!processedArgs.options.data) return utils._fireError(new Error('Couldn\\'t find a matching contract method, or the number of parameters is wrong.'), defer.eventEmitter, defer.reject, processedArgs.callback);\n  return processedArgs;\n};\n/**\r\n * Executes a call, transact or estimateGas on a contract function\r\n *\r\n * @method _executeMethod\r\n * @param {String} type the type this execute function should execute\r\n * @param {Boolean} makeRequest if true, it simply returns the request parameters, rather than executing it\r\n */\n\n\nContract.prototype._executeMethod = function _executeMethod() {\n  var _this = this,\n      args = this._parent._processExecuteArguments.call(this, Array.prototype.slice.call(arguments), defer),\n      defer = promiEvent(args.type !== 'send'),\n      ethAccounts = _this.constructor._ethAccounts || _this._ethAccounts; // simple return request for batch requests\n\n\n  if (args.generateRequest) {\n    var payload = {\n      params: [formatters.inputCallFormatter.call(this._parent, args.options)],\n      callback: args.callback\n    };\n\n    if (args.type === 'call') {\n      payload.params.push(formatters.inputDefaultBlockNumberFormatter.call(this._parent, args.defaultBlock));\n      payload.method = 'eth_call';\n      payload.format = this._parent._decodeMethodReturn.bind(null, this._method.outputs);\n    } else {\n      payload.method = 'eth_sendTransaction';\n    }\n\n    return payload;\n  }\n\n  switch (args.type) {\n    case 'createAccessList':\n      // return error, if no \"from\" is specified\n      if (!utils.isAddress(args.options.from)) {\n        return utils._fireError(errors.ContractNoFromAddressDefinedError(), defer.eventEmitter, defer.reject, args.callback);\n      }\n\n      var createAccessList = new Method({\n        name: 'createAccessList',\n        call: 'eth_createAccessList',\n        params: 2,\n        inputFormatter: [formatters.inputTransactionFormatter, formatters.inputDefaultBlockNumberFormatter],\n        requestManager: _this._parent._requestManager,\n        accounts: ethAccounts,\n        defaultAccount: _this._parent.defaultAccount,\n        defaultBlock: _this._parent.defaultBlock\n      }).createFunction();\n      return createAccessList(args.options, args.callback);\n\n    case 'estimate':\n      var estimateGas = new Method({\n        name: 'estimateGas',\n        call: 'eth_estimateGas',\n        params: 1,\n        inputFormatter: [formatters.inputCallFormatter],\n        outputFormatter: utils.hexToNumber,\n        requestManager: _this._parent._requestManager,\n        accounts: ethAccounts,\n        defaultAccount: _this._parent.defaultAccount,\n        defaultBlock: _this._parent.defaultBlock\n      }).createFunction();\n      return estimateGas(args.options, args.callback);\n\n    case 'call':\n      // TODO check errors: missing \"from\" should give error on deploy and send, call ?\n      var call = new Method({\n        name: 'call',\n        call: 'eth_call',\n        params: 2,\n        inputFormatter: [formatters.inputCallFormatter, formatters.inputDefaultBlockNumberFormatter],\n        // add output formatter for decoding\n        outputFormatter: function (result) {\n          return _this._parent._decodeMethodReturn(_this._method.outputs, result);\n        },\n        requestManager: _this._parent._requestManager,\n        accounts: ethAccounts,\n        defaultAccount: _this._parent.defaultAccount,\n        defaultBlock: _this._parent.defaultBlock,\n        handleRevert: _this._parent.handleRevert,\n        abiCoder: abi\n      }).createFunction();\n      return call(args.options, args.defaultBlock, args.callback);\n\n    case 'send':\n      // return error, if no \"from\" is specified\n      if (!utils.isAddress(args.options.from)) {\n        return utils._fireError(errors.ContractNoFromAddressDefinedError(), defer.eventEmitter, defer.reject, args.callback);\n      }\n\n      if (typeof this._method.payable === 'boolean' && !this._method.payable && args.options.value && args.options.value > 0) {\n        return utils._fireError(new Error('Can not send value to non-payable contract method or constructor'), defer.eventEmitter, defer.reject, args.callback);\n      } // make sure receipt logs are decoded\n\n\n      var extraFormatters = {\n        receiptFormatter: function (receipt) {\n          if (Array.isArray(receipt.logs)) {\n            // decode logs\n            var events = receipt.logs.map(log => {\n              return _this._parent._decodeEventABI.call({\n                name: 'ALLEVENTS',\n                jsonInterface: _this._parent.options.jsonInterface\n              }, log);\n            }); // make log names keys\n\n            receipt.events = {};\n            var count = 0;\n            events.forEach(function (ev) {\n              if (ev.event) {\n                // if > 1 of the same event, don't overwrite any existing events\n                if (receipt.events[ev.event]) {\n                  if (Array.isArray(receipt.events[ev.event])) {\n                    receipt.events[ev.event].push(ev);\n                  } else {\n                    receipt.events[ev.event] = [receipt.events[ev.event], ev];\n                  }\n                } else {\n                  receipt.events[ev.event] = ev;\n                }\n              } else {\n                receipt.events[count] = ev;\n                count++;\n              }\n            });\n            delete receipt.logs;\n          }\n\n          return receipt;\n        },\n        contractDeployFormatter: function (receipt) {\n          var newContract = _this._parent.clone();\n\n          newContract.options.address = receipt.contractAddress;\n          return newContract;\n        }\n      };\n      var sendTransaction = new Method({\n        name: 'sendTransaction',\n        call: 'eth_sendTransaction',\n        params: 1,\n        inputFormatter: [formatters.inputTransactionFormatter],\n        requestManager: _this._parent._requestManager,\n        accounts: _this.constructor._ethAccounts || _this._ethAccounts,\n        defaultAccount: _this._parent.defaultAccount,\n        defaultBlock: _this._parent.defaultBlock,\n        transactionBlockTimeout: _this._parent.transactionBlockTimeout,\n        transactionConfirmationBlocks: _this._parent.transactionConfirmationBlocks,\n        transactionPollingTimeout: _this._parent.transactionPollingTimeout,\n        transactionPollingInterval: _this._parent.transactionPollingInterval,\n        defaultCommon: _this._parent.defaultCommon,\n        defaultChain: _this._parent.defaultChain,\n        defaultHardfork: _this._parent.defaultHardfork,\n        handleRevert: _this._parent.handleRevert,\n        extraFormatters: extraFormatters,\n        abiCoder: abi\n      }).createFunction();\n      return sendTransaction(args.options, args.callback);\n\n    default:\n      throw new Error('Method \"' + args.type + '\" not implemented.');\n  }\n};\n\nmodule.exports = Contract;","map":{"version":3,"names":["core","require","Method","utils","Subscription","subscription","formatters","errors","promiEvent","abi","Contract","jsonInterface","address","options","_this","args","Array","prototype","slice","call","arguments","Error","setProvider","packageInit","clearSubscriptions","_requestManager","constructor","isArray","ContractMissingABIError","lastArg","length","_getOrSetDefaultOptions","Object","defineProperty","set","value","_address","toChecksumAddress","inputAddressFormatter","get","enumerable","methods","events","_jsonInterface","map","method","func","funcName","constant","stateMutability","payable","name","_jsonInterfaceMethodToString","type","signature","encodeFunctionSignature","_createTxObject","bind","parent","cascadeFunc","nextMethod","encodeEventSignature","event","_on","allEvents","defaultAccount","defaultBlock","handleRevert","val","common","defaultCommon","hardfork","defaultHardfork","chain","defaultChain","transactionPollingTimeout","transactionPollingInterval","transactionConfirmationBlocks","transactionBlockTimeout","blockHeaderTimeout","provider","accounts","_ethAccounts","_getCallback","getCallback","pop","_checkListener","ContractReservedEventError","getOrSetDefaultOptions","gasPrice","String","from","data","gas","gasLimit","_encodeEventABI","filter","result","f","undefined","forEach","inputBlockNumberFormatter","topics","anonymous","push","indexedTopics","inputs","i","indexed","v","encodeParameter","concat","toLowerCase","_decodeEventABI","outputLogFormatter","find","intf","indexedInputs","input","argTopics","returnValues","decodeLog","__length__","raw","_encodeMethodABI","methodSignature","_method","paramsABI","_parent","json","replace","inputLength","encodeParameters","_deployData","startsWith","returnValue","_decodeMethodReturn","outputs","decodeParameters","deploy","callback","ContractMissingDeployDataError","apply","deployData","_generateEventOptions","eventName","ContractEventDoesNotExistError","isAddress","ContractNoAddressDefinedError","params","clone","once","ContractOnceRequiresCallbackError","fromBlock","err","res","sub","unsubscribe","subOptions","toBlock","console","warn","inputFormatter","inputLogFormatter","outputFormatter","subscriptionHandler","output","removed","emit","requestManager","subscribe","getPastEvents","getPastLogs","setRequestManager","buildCall","txObject","_executeMethod","request","send","encodeABI","estimateGas","createAccessList","InvalidNumberOfParams","_processExecuteArguments","defer","processedArgs","shift","isFinite","generateRequest","to","_fireError","eventEmitter","reject","ethAccounts","payload","inputCallFormatter","inputDefaultBlockNumberFormatter","format","ContractNoFromAddressDefinedError","inputTransactionFormatter","createFunction","hexToNumber","abiCoder","extraFormatters","receiptFormatter","receipt","logs","log","count","ev","contractDeployFormatter","newContract","contractAddress","sendTransaction","module","exports"],"sources":["C:/Users/mcnl/Desktop/gong/BlockchainSafetyManagement/client/node_modules/web3-eth-contract/lib/index.js"],"sourcesContent":["/*\r\n    This file is part of web3.js.\r\n\r\n    web3.js is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    web3.js is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n/**\r\n * @file contract.js\r\n *\r\n * To initialize a contract use:\r\n *\r\n *  var Contract = require('web3-eth-contract');\r\n *  Contract.setProvider('ws://localhost:8546');\r\n *  var contract = new Contract(abi, address, ...);\r\n *\r\n * @author Fabian Vogelsteller <fabian@ethereum.org>\r\n * @date 2017\r\n */\r\n\"use strict\";\r\nvar core = require('web3-core');\r\nvar Method = require('web3-core-method');\r\nvar utils = require('web3-utils');\r\nvar Subscription = require('web3-core-subscriptions').subscription;\r\nvar formatters = require('web3-core-helpers').formatters;\r\nvar errors = require('web3-core-helpers').errors;\r\nvar promiEvent = require('web3-core-promievent');\r\nvar abi = require('web3-eth-abi');\r\n/**\r\n * Should be called to create new contract instance\r\n *\r\n * @method Contract\r\n * @constructor\r\n * @param {Array} jsonInterface\r\n * @param {String} address\r\n * @param {Object} options\r\n */\r\nvar Contract = function Contract(jsonInterface, address, options) {\r\n    var _this = this, args = Array.prototype.slice.call(arguments);\r\n    if (!(this instanceof Contract)) {\r\n        throw new Error('Please use the \"new\" keyword to instantiate a web3.eth.Contract() object!');\r\n    }\r\n    this.setProvider = function () {\r\n        core.packageInit(_this, arguments);\r\n        _this.clearSubscriptions = _this._requestManager.clearSubscriptions;\r\n    };\r\n    // sets _requestmanager\r\n    core.packageInit(this, [this.constructor]);\r\n    this.clearSubscriptions = this._requestManager.clearSubscriptions;\r\n    if (!jsonInterface || !(Array.isArray(jsonInterface))) {\r\n        throw errors.ContractMissingABIError();\r\n    }\r\n    // create the options object\r\n    this.options = {};\r\n    var lastArg = args[args.length - 1];\r\n    if (!!lastArg && typeof lastArg === 'object' && !Array.isArray(lastArg)) {\r\n        options = lastArg;\r\n        this.options = { ...this.options, ...this._getOrSetDefaultOptions(options) };\r\n        if (!!address && typeof address === 'object') {\r\n            address = null;\r\n        }\r\n    }\r\n    // set address\r\n    Object.defineProperty(this.options, 'address', {\r\n        set: function (value) {\r\n            if (value) {\r\n                _this._address = utils.toChecksumAddress(formatters.inputAddressFormatter(value));\r\n            }\r\n        },\r\n        get: function () {\r\n            return _this._address;\r\n        },\r\n        enumerable: true\r\n    });\r\n    // add method and event signatures, when the jsonInterface gets set\r\n    Object.defineProperty(this.options, 'jsonInterface', {\r\n        set: function (value) {\r\n            _this.methods = {};\r\n            _this.events = {};\r\n            _this._jsonInterface = value.map(function (method) {\r\n                var func, funcName;\r\n                // make constant and payable backwards compatible\r\n                method.constant = (method.stateMutability === \"view\" || method.stateMutability === \"pure\" || method.constant);\r\n                method.payable = (method.stateMutability === \"payable\" || method.payable);\r\n                if (method.name) {\r\n                    funcName = utils._jsonInterfaceMethodToString(method);\r\n                }\r\n                // function\r\n                if (method.type === 'function') {\r\n                    method.signature = abi.encodeFunctionSignature(funcName);\r\n                    func = _this._createTxObject.bind({\r\n                        method: method,\r\n                        parent: _this\r\n                    });\r\n                    // add method only if not one already exists\r\n                    if (!_this.methods[method.name]) {\r\n                        _this.methods[method.name] = func;\r\n                    }\r\n                    else {\r\n                        var cascadeFunc = _this._createTxObject.bind({\r\n                            method: method,\r\n                            parent: _this,\r\n                            nextMethod: _this.methods[method.name]\r\n                        });\r\n                        _this.methods[method.name] = cascadeFunc;\r\n                    }\r\n                    // definitely add the method based on its signature\r\n                    _this.methods[method.signature] = func;\r\n                    // add method by name\r\n                    _this.methods[funcName] = func;\r\n                    // event\r\n                }\r\n                else if (method.type === 'event') {\r\n                    method.signature = abi.encodeEventSignature(funcName);\r\n                    var event = _this._on.bind(_this, method.signature);\r\n                    // add method only if not already exists\r\n                    if (!_this.events[method.name] || _this.events[method.name].name === 'bound ')\r\n                        _this.events[method.name] = event;\r\n                    // definitely add the method based on its signature\r\n                    _this.events[method.signature] = event;\r\n                    // add event by name\r\n                    _this.events[funcName] = event;\r\n                }\r\n                return method;\r\n            });\r\n            // add allEvents\r\n            _this.events.allEvents = _this._on.bind(_this, 'allevents');\r\n            return _this._jsonInterface;\r\n        },\r\n        get: function () {\r\n            return _this._jsonInterface;\r\n        },\r\n        enumerable: true\r\n    });\r\n    // get default account from the Class\r\n    var defaultAccount = this.constructor.defaultAccount;\r\n    var defaultBlock = this.constructor.defaultBlock || 'latest';\r\n    Object.defineProperty(this, 'handleRevert', {\r\n        get: function () {\r\n            if (_this.options.handleRevert === false || _this.options.handleRevert === true) {\r\n                return _this.options.handleRevert;\r\n            }\r\n            return this.constructor.handleRevert;\r\n        },\r\n        set: function (val) {\r\n            _this.options.handleRevert = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'defaultCommon', {\r\n        get: function () {\r\n            return _this.options.common || this.constructor.defaultCommon;\r\n        },\r\n        set: function (val) {\r\n            _this.options.common = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'defaultHardfork', {\r\n        get: function () {\r\n            return _this.options.hardfork || this.constructor.defaultHardfork;\r\n        },\r\n        set: function (val) {\r\n            _this.options.hardfork = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'defaultChain', {\r\n        get: function () {\r\n            return _this.options.chain || this.constructor.defaultChain;\r\n        },\r\n        set: function (val) {\r\n            _this.options.chain = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'transactionPollingTimeout', {\r\n        get: function () {\r\n            if (_this.options.transactionPollingTimeout === 0) {\r\n                return _this.options.transactionPollingTimeout;\r\n            }\r\n            return _this.options.transactionPollingTimeout || this.constructor.transactionPollingTimeout;\r\n        },\r\n        set: function (val) {\r\n            _this.options.transactionPollingTimeout = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'transactionPollingInterval', {\r\n        get: function () {\r\n            if (_this.options.transactionPollingInterval === 0) {\r\n                return _this.options.transactionPollingInterval;\r\n            }\r\n            return _this.options.transactionPollingInterval || this.constructor.transactionPollingInterval;\r\n        },\r\n        set: function (val) {\r\n            _this.options.transactionPollingInterval = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'transactionConfirmationBlocks', {\r\n        get: function () {\r\n            if (_this.options.transactionConfirmationBlocks === 0) {\r\n                return _this.options.transactionConfirmationBlocks;\r\n            }\r\n            return _this.options.transactionConfirmationBlocks || this.constructor.transactionConfirmationBlocks;\r\n        },\r\n        set: function (val) {\r\n            _this.options.transactionConfirmationBlocks = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'transactionBlockTimeout', {\r\n        get: function () {\r\n            if (_this.options.transactionBlockTimeout === 0) {\r\n                return _this.options.transactionBlockTimeout;\r\n            }\r\n            return _this.options.transactionBlockTimeout || this.constructor.transactionBlockTimeout;\r\n        },\r\n        set: function (val) {\r\n            _this.options.transactionBlockTimeout = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'blockHeaderTimeout', {\r\n        get: function () {\r\n            if (_this.options.blockHeaderTimeout === 0) {\r\n                return _this.options.blockHeaderTimeout;\r\n            }\r\n            return _this.options.blockHeaderTimeout || this.constructor.blockHeaderTimeout;\r\n        },\r\n        set: function (val) {\r\n            _this.options.blockHeaderTimeout = val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'defaultAccount', {\r\n        get: function () {\r\n            return defaultAccount;\r\n        },\r\n        set: function (val) {\r\n            if (val) {\r\n                defaultAccount = utils.toChecksumAddress(formatters.inputAddressFormatter(val));\r\n            }\r\n            return val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    Object.defineProperty(this, 'defaultBlock', {\r\n        get: function () {\r\n            return defaultBlock;\r\n        },\r\n        set: function (val) {\r\n            defaultBlock = val;\r\n            return val;\r\n        },\r\n        enumerable: true\r\n    });\r\n    // properties\r\n    this.methods = {};\r\n    this.events = {};\r\n    this._address = null;\r\n    this._jsonInterface = [];\r\n    // set getter/setter properties\r\n    this.options.address = address;\r\n    this.options.jsonInterface = jsonInterface;\r\n};\r\n/**\r\n * Sets the new provider, creates a new requestManager, registers the \"data\" listener on the provider and sets the\r\n * accounts module for the Contract class.\r\n *\r\n * @method setProvider\r\n *\r\n * @param {string|provider} provider\r\n * @param {Accounts} accounts\r\n *\r\n * @returns void\r\n */\r\nContract.setProvider = function (provider, accounts) {\r\n    // Contract.currentProvider = provider;\r\n    core.packageInit(this, [provider]);\r\n    this._ethAccounts = accounts;\r\n};\r\n/**\r\n * Get the callback and modify the array if necessary\r\n *\r\n * @method _getCallback\r\n * @param {Array} args\r\n * @return {Function} the callback\r\n */\r\nContract.prototype._getCallback = function getCallback(args) {\r\n    if (args && !!args[args.length - 1] && typeof args[args.length - 1] === 'function') {\r\n        return args.pop(); // modify the args array!\r\n    }\r\n};\r\n/**\r\n * Checks that no listener with name \"newListener\" or \"removeListener\" is added.\r\n *\r\n * @method _checkListener\r\n * @param {String} type\r\n * @param {String} event\r\n * @return {Object} the contract instance\r\n */\r\nContract.prototype._checkListener = function (type, event) {\r\n    if (event === type) {\r\n        throw errors.ContractReservedEventError(type);\r\n    }\r\n};\r\n/**\r\n * Use default values, if options are not available\r\n *\r\n * @method _getOrSetDefaultOptions\r\n * @param {Object} options the options gived by the user\r\n * @return {Object} the options with gaps filled by defaults\r\n */\r\nContract.prototype._getOrSetDefaultOptions = function getOrSetDefaultOptions(options) {\r\n    var gasPrice = options.gasPrice ? String(options.gasPrice) : null;\r\n    var from = options.from ? utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)) : null;\r\n    options.data = options.data || this.options.data;\r\n    options.from = from || this.options.from;\r\n    options.gasPrice = gasPrice || this.options.gasPrice;\r\n    options.gas = options.gas || options.gasLimit || this.options.gas;\r\n    // TODO replace with only gasLimit?\r\n    delete options.gasLimit;\r\n    return options;\r\n};\r\n/**\r\n * Should be used to encode indexed params and options to one final object\r\n *\r\n * @method _encodeEventABI\r\n * @param {Object} event\r\n * @param {Object} options\r\n * @return {Object} everything combined together and encoded\r\n */\r\nContract.prototype._encodeEventABI = function (event, options) {\r\n    options = options || {};\r\n    var filter = options.filter || {}, result = {};\r\n    ['fromBlock', 'toBlock'].filter(function (f) {\r\n        return options[f] !== undefined;\r\n    }).forEach(function (f) {\r\n        result[f] = formatters.inputBlockNumberFormatter(options[f]);\r\n    });\r\n    // use given topics\r\n    if (Array.isArray(options.topics)) {\r\n        result.topics = options.topics;\r\n        // create topics based on filter\r\n    }\r\n    else {\r\n        result.topics = [];\r\n        // add event signature\r\n        if (event && !event.anonymous && event.name !== 'ALLEVENTS') {\r\n            result.topics.push(event.signature);\r\n        }\r\n        // add event topics (indexed arguments)\r\n        if (event.name !== 'ALLEVENTS') {\r\n            var indexedTopics = event.inputs.filter(function (i) {\r\n                return i.indexed === true;\r\n            }).map(function (i) {\r\n                var value = filter[i.name];\r\n                if (!value) {\r\n                    return null;\r\n                }\r\n                // TODO: https://github.com/ethereum/web3.js/issues/344\r\n                // TODO: deal properly with components\r\n                if (Array.isArray(value)) {\r\n                    return value.map(function (v) {\r\n                        return abi.encodeParameter(i.type, v);\r\n                    });\r\n                }\r\n                return abi.encodeParameter(i.type, value);\r\n            });\r\n            result.topics = result.topics.concat(indexedTopics);\r\n        }\r\n        if (!result.topics.length)\r\n            delete result.topics;\r\n    }\r\n    if (this.options.address) {\r\n        result.address = this.options.address.toLowerCase();\r\n    }\r\n    return result;\r\n};\r\n/**\r\n * Should be used to decode indexed params and options\r\n *\r\n * @method _decodeEventABI\r\n * @param {Object} data\r\n * @return {Object} result object with decoded indexed && not indexed params\r\n */\r\nContract.prototype._decodeEventABI = function (data) {\r\n    var event = this;\r\n    data.data = data.data || '';\r\n    data.topics = data.topics || [];\r\n    var result = formatters.outputLogFormatter(data);\r\n    // if allEvents get the right event\r\n    if (event.name === 'ALLEVENTS') {\r\n        event = event.jsonInterface.find(function (intf) {\r\n            return (intf.signature === data.topics[0]);\r\n        }) || { anonymous: true };\r\n    }\r\n    // create empty inputs if none are present (e.g. anonymous events on allEvents)\r\n    event.inputs = event.inputs || [];\r\n    // Handle case where an event signature shadows the current ABI with non-identical\r\n    // arg indexing. If # of topics doesn't match, event is anon.\r\n    if (!event.anonymous) {\r\n        let indexedInputs = 0;\r\n        event.inputs.forEach(input => input.indexed ? indexedInputs++ : null);\r\n        if (indexedInputs > 0 && (data.topics.length !== indexedInputs + 1)) {\r\n            event = {\r\n                anonymous: true,\r\n                inputs: []\r\n            };\r\n        }\r\n    }\r\n    var argTopics = event.anonymous ? data.topics : data.topics.slice(1);\r\n    result.returnValues = abi.decodeLog(event.inputs, data.data, argTopics);\r\n    delete result.returnValues.__length__;\r\n    // add name\r\n    result.event = event.name;\r\n    // add signature\r\n    result.signature = (event.anonymous || !data.topics[0]) ? null : data.topics[0];\r\n    // move the data and topics to \"raw\"\r\n    result.raw = {\r\n        data: result.data,\r\n        topics: result.topics\r\n    };\r\n    delete result.data;\r\n    delete result.topics;\r\n    return result;\r\n};\r\n/**\r\n * Encodes an ABI for a method, including signature or the method.\r\n * Or when constructor encodes only the constructor parameters.\r\n *\r\n * @method _encodeMethodABI\r\n * @param {Mixed} args the arguments to encode\r\n * @param {String} the encoded ABI\r\n */\r\nContract.prototype._encodeMethodABI = function _encodeMethodABI() {\r\n    var methodSignature = this._method.signature, args = this.arguments || [];\r\n    var signature = false, paramsABI = this._parent.options.jsonInterface.filter(function (json) {\r\n        return ((methodSignature === 'constructor' && json.type === methodSignature) ||\r\n            ((json.signature === methodSignature || json.signature === methodSignature.replace('0x', '') || json.name === methodSignature) && json.type === 'function'));\r\n    }).map(function (json) {\r\n        var inputLength = (Array.isArray(json.inputs)) ? json.inputs.length : 0;\r\n        if (inputLength !== args.length) {\r\n            throw new Error('The number of arguments is not matching the methods required number. You need to pass ' + inputLength + ' arguments.');\r\n        }\r\n        if (json.type === 'function') {\r\n            signature = json.signature;\r\n        }\r\n        return Array.isArray(json.inputs) ? json.inputs : [];\r\n    }).map(function (inputs) {\r\n        return abi.encodeParameters(inputs, args).replace('0x', '');\r\n    })[0] || '';\r\n    // return constructor\r\n    if (methodSignature === 'constructor') {\r\n        if (!this._deployData)\r\n            throw new Error('The contract has no contract data option set. This is necessary to append the constructor parameters.');\r\n        if (!this._deployData.startsWith('0x')) {\r\n            this._deployData = '0x' + this._deployData;\r\n        }\r\n        return this._deployData + paramsABI;\r\n    }\r\n    // return method\r\n    var returnValue = (signature) ? signature + paramsABI : paramsABI;\r\n    if (!returnValue) {\r\n        throw new Error('Couldn\\'t find a matching contract method named \"' + this._method.name + '\".');\r\n    }\r\n    return returnValue;\r\n};\r\n/**\r\n * Decode method return values\r\n *\r\n * @method _decodeMethodReturn\r\n * @param {Array} outputs\r\n * @param {String} returnValues\r\n * @return {Object} decoded output return values\r\n */\r\nContract.prototype._decodeMethodReturn = function (outputs, returnValues) {\r\n    if (!returnValues) {\r\n        return null;\r\n    }\r\n    returnValues = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\r\n    var result = abi.decodeParameters(outputs, returnValues);\r\n    if (result.__length__ === 1) {\r\n        return result[0];\r\n    }\r\n    delete result.__length__;\r\n    return result;\r\n};\r\n/**\r\n * Deploys a contract and fire events based on its state: transactionHash, receipt\r\n *\r\n * All event listeners will be removed, once the last possible event is fired (\"error\", or \"receipt\")\r\n *\r\n * @method deploy\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} EventEmitter possible events are \"error\", \"transactionHash\" and \"receipt\"\r\n */\r\nContract.prototype.deploy = function (options, callback) {\r\n    options = options || {};\r\n    options.arguments = options.arguments || [];\r\n    options = this._getOrSetDefaultOptions(options);\r\n    // throw error, if no \"data\" is specified\r\n    if (!options.data) {\r\n        if (typeof callback === 'function') {\r\n            return callback(errors.ContractMissingDeployDataError());\r\n        }\r\n        throw errors.ContractMissingDeployDataError();\r\n    }\r\n    var constructor = this.options.jsonInterface.find((method) => {\r\n        return (method.type === 'constructor');\r\n    }) || {};\r\n    constructor.signature = 'constructor';\r\n    return this._createTxObject.apply({\r\n        method: constructor,\r\n        parent: this,\r\n        deployData: options.data,\r\n        _ethAccounts: this.constructor._ethAccounts\r\n    }, options.arguments);\r\n};\r\n/**\r\n * Gets the event signature and outputFormatters\r\n *\r\n * @method _generateEventOptions\r\n * @param {Object} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the event options object\r\n */\r\nContract.prototype._generateEventOptions = function () {\r\n    var args = Array.prototype.slice.call(arguments);\r\n    // get the callback\r\n    var callback = this._getCallback(args);\r\n    // get the options\r\n    var options = (!!args[args.length - 1] && typeof args[args.length - 1]) === 'object' ? args.pop() : {};\r\n    var eventName = (typeof args[0] === 'string') ? args[0] : 'allevents';\r\n    var event = (eventName.toLowerCase() === 'allevents') ? {\r\n        name: 'ALLEVENTS',\r\n        jsonInterface: this.options.jsonInterface\r\n    } : this.options.jsonInterface.find(function (json) {\r\n        return (json.type === 'event' && (json.name === eventName || json.signature === '0x' + eventName.replace('0x', '')));\r\n    });\r\n    if (!event) {\r\n        throw errors.ContractEventDoesNotExistError(eventName);\r\n    }\r\n    if (!utils.isAddress(this.options.address)) {\r\n        throw errors.ContractNoAddressDefinedError();\r\n    }\r\n    return {\r\n        params: this._encodeEventABI(event, options),\r\n        event: event,\r\n        callback: callback\r\n    };\r\n};\r\n/**\r\n * Adds event listeners and creates a subscription, and remove it once its fired.\r\n *\r\n * @method clone\r\n * @return {Object} the event subscription\r\n */\r\nContract.prototype.clone = function () {\r\n    return new this.constructor(this.options.jsonInterface, this.options.address, this.options);\r\n};\r\n/**\r\n * Adds event listeners and creates a subscription, and remove it once its fired.\r\n *\r\n * @method once\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the event subscription\r\n */\r\nContract.prototype.once = function (event, options, callback) {\r\n    var args = Array.prototype.slice.call(arguments);\r\n    // get the callback\r\n    callback = this._getCallback(args);\r\n    if (!callback) {\r\n        throw errors.ContractOnceRequiresCallbackError();\r\n    }\r\n    // don't allow fromBlock\r\n    if (options)\r\n        delete options.fromBlock;\r\n    // don't return as once shouldn't provide \"on\"\r\n    this._on(event, options, function (err, res, sub) {\r\n        sub.unsubscribe();\r\n        if (typeof callback === 'function') {\r\n            callback(err, res, sub);\r\n        }\r\n    });\r\n    return undefined;\r\n};\r\n/**\r\n * Adds event listeners and creates a subscription.\r\n *\r\n * @method _on\r\n *\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n *\r\n * @return {Object} the event subscription\r\n */\r\nContract.prototype._on = function () {\r\n    var subOptions = this._generateEventOptions.apply(this, arguments);\r\n    if (subOptions.params && subOptions.params.toBlock) {\r\n        delete subOptions.params.toBlock;\r\n        console.warn('Invalid option: toBlock. Use getPastEvents for specific range.');\r\n    }\r\n    // prevent the event \"newListener\" and \"removeListener\" from being overwritten\r\n    this._checkListener('newListener', subOptions.event.name);\r\n    this._checkListener('removeListener', subOptions.event.name);\r\n    // TODO check if listener already exists? and reuse subscription if options are the same.\r\n    // create new subscription\r\n    var subscription = new Subscription({\r\n        subscription: {\r\n            params: 1,\r\n            inputFormatter: [formatters.inputLogFormatter],\r\n            outputFormatter: this._decodeEventABI.bind(subOptions.event),\r\n            // DUBLICATE, also in web3-eth\r\n            subscriptionHandler: function (output) {\r\n                if (output.removed) {\r\n                    this.emit('changed', output);\r\n                }\r\n                else {\r\n                    this.emit('data', output);\r\n                }\r\n                if (typeof this.callback === 'function') {\r\n                    this.callback(null, output, this);\r\n                }\r\n            }\r\n        },\r\n        type: 'eth',\r\n        requestManager: this._requestManager\r\n    });\r\n    subscription.subscribe('logs', subOptions.params, subOptions.callback || function () { });\r\n    return subscription;\r\n};\r\n/**\r\n * Get past events from contracts\r\n *\r\n * @method getPastEvents\r\n * @param {String} event\r\n * @param {Object} options\r\n * @param {Function} callback\r\n * @return {Object} the promievent\r\n */\r\nContract.prototype.getPastEvents = function () {\r\n    var subOptions = this._generateEventOptions.apply(this, arguments);\r\n    var getPastLogs = new Method({\r\n        name: 'getPastLogs',\r\n        call: 'eth_getLogs',\r\n        params: 1,\r\n        inputFormatter: [formatters.inputLogFormatter],\r\n        outputFormatter: this._decodeEventABI.bind(subOptions.event)\r\n    });\r\n    getPastLogs.setRequestManager(this._requestManager);\r\n    var call = getPastLogs.buildCall();\r\n    getPastLogs = null;\r\n    return call(subOptions.params, subOptions.callback);\r\n};\r\n/**\r\n * returns the an object with call, send, estimate functions\r\n *\r\n * @method _createTxObject\r\n * @returns {Object} an object with functions to call the methods\r\n */\r\nContract.prototype._createTxObject = function _createTxObject() {\r\n    var args = Array.prototype.slice.call(arguments);\r\n    var txObject = {};\r\n    if (this.method.type === 'function') {\r\n        txObject.call = this.parent._executeMethod.bind(txObject, 'call');\r\n        txObject.call.request = this.parent._executeMethod.bind(txObject, 'call', true); // to make batch requests\r\n    }\r\n    txObject.send = this.parent._executeMethod.bind(txObject, 'send');\r\n    txObject.send.request = this.parent._executeMethod.bind(txObject, 'send', true); // to make batch requests\r\n    txObject.encodeABI = this.parent._encodeMethodABI.bind(txObject);\r\n    txObject.estimateGas = this.parent._executeMethod.bind(txObject, 'estimate');\r\n    txObject.createAccessList = this.parent._executeMethod.bind(txObject, 'createAccessList');\r\n    if (args && this.method.inputs && args.length !== this.method.inputs.length) {\r\n        if (this.nextMethod) {\r\n            return this.nextMethod.apply(null, args);\r\n        }\r\n        throw errors.InvalidNumberOfParams(args.length, this.method.inputs.length, this.method.name);\r\n    }\r\n    txObject.arguments = args || [];\r\n    txObject._method = this.method;\r\n    txObject._parent = this.parent;\r\n    txObject._ethAccounts = this.parent.constructor._ethAccounts || this._ethAccounts;\r\n    if (this.deployData) {\r\n        txObject._deployData = this.deployData;\r\n    }\r\n    return txObject;\r\n};\r\n/**\r\n * Generates the options for the execute call\r\n *\r\n * @method _processExecuteArguments\r\n * @param {Array} args\r\n * @param {Promise} defer\r\n */\r\nContract.prototype._processExecuteArguments = function _processExecuteArguments(args, defer) {\r\n    var processedArgs = {};\r\n    processedArgs.type = args.shift();\r\n    // get the callback\r\n    processedArgs.callback = this._parent._getCallback(args);\r\n    // get block number to use for call\r\n    if (processedArgs.type === 'call' && args[args.length - 1] !== true && (typeof args[args.length - 1] === 'string' || isFinite(args[args.length - 1])))\r\n        processedArgs.defaultBlock = args.pop();\r\n    // get the options\r\n    processedArgs.options = (!!args[args.length - 1] && typeof args[args.length - 1]) === 'object' ? args.pop() : {};\r\n    // get the generateRequest argument for batch requests\r\n    processedArgs.generateRequest = (args[args.length - 1] === true) ? args.pop() : false;\r\n    processedArgs.options = this._parent._getOrSetDefaultOptions(processedArgs.options);\r\n    processedArgs.options.data = this.encodeABI();\r\n    // add contract address\r\n    if (!this._deployData && !utils.isAddress(this._parent.options.address))\r\n        throw errors.ContractNoAddressDefinedError();\r\n    if (!this._deployData)\r\n        processedArgs.options.to = this._parent.options.address;\r\n    // return error, if no \"data\" is specified\r\n    if (!processedArgs.options.data)\r\n        return utils._fireError(new Error('Couldn\\'t find a matching contract method, or the number of parameters is wrong.'), defer.eventEmitter, defer.reject, processedArgs.callback);\r\n    return processedArgs;\r\n};\r\n/**\r\n * Executes a call, transact or estimateGas on a contract function\r\n *\r\n * @method _executeMethod\r\n * @param {String} type the type this execute function should execute\r\n * @param {Boolean} makeRequest if true, it simply returns the request parameters, rather than executing it\r\n */\r\nContract.prototype._executeMethod = function _executeMethod() {\r\n    var _this = this, args = this._parent._processExecuteArguments.call(this, Array.prototype.slice.call(arguments), defer), defer = promiEvent((args.type !== 'send')), ethAccounts = _this.constructor._ethAccounts || _this._ethAccounts;\r\n    // simple return request for batch requests\r\n    if (args.generateRequest) {\r\n        var payload = {\r\n            params: [formatters.inputCallFormatter.call(this._parent, args.options)],\r\n            callback: args.callback\r\n        };\r\n        if (args.type === 'call') {\r\n            payload.params.push(formatters.inputDefaultBlockNumberFormatter.call(this._parent, args.defaultBlock));\r\n            payload.method = 'eth_call';\r\n            payload.format = this._parent._decodeMethodReturn.bind(null, this._method.outputs);\r\n        }\r\n        else {\r\n            payload.method = 'eth_sendTransaction';\r\n        }\r\n        return payload;\r\n    }\r\n    switch (args.type) {\r\n        case 'createAccessList':\r\n            // return error, if no \"from\" is specified\r\n            if (!utils.isAddress(args.options.from)) {\r\n                return utils._fireError(errors.ContractNoFromAddressDefinedError(), defer.eventEmitter, defer.reject, args.callback);\r\n            }\r\n            var createAccessList = (new Method({\r\n                name: 'createAccessList',\r\n                call: 'eth_createAccessList',\r\n                params: 2,\r\n                inputFormatter: [formatters.inputTransactionFormatter, formatters.inputDefaultBlockNumberFormatter],\r\n                requestManager: _this._parent._requestManager,\r\n                accounts: ethAccounts,\r\n                defaultAccount: _this._parent.defaultAccount,\r\n                defaultBlock: _this._parent.defaultBlock\r\n            })).createFunction();\r\n            return createAccessList(args.options, args.callback);\r\n        case 'estimate':\r\n            var estimateGas = (new Method({\r\n                name: 'estimateGas',\r\n                call: 'eth_estimateGas',\r\n                params: 1,\r\n                inputFormatter: [formatters.inputCallFormatter],\r\n                outputFormatter: utils.hexToNumber,\r\n                requestManager: _this._parent._requestManager,\r\n                accounts: ethAccounts,\r\n                defaultAccount: _this._parent.defaultAccount,\r\n                defaultBlock: _this._parent.defaultBlock\r\n            })).createFunction();\r\n            return estimateGas(args.options, args.callback);\r\n        case 'call':\r\n            // TODO check errors: missing \"from\" should give error on deploy and send, call ?\r\n            var call = (new Method({\r\n                name: 'call',\r\n                call: 'eth_call',\r\n                params: 2,\r\n                inputFormatter: [formatters.inputCallFormatter, formatters.inputDefaultBlockNumberFormatter],\r\n                // add output formatter for decoding\r\n                outputFormatter: function (result) {\r\n                    return _this._parent._decodeMethodReturn(_this._method.outputs, result);\r\n                },\r\n                requestManager: _this._parent._requestManager,\r\n                accounts: ethAccounts,\r\n                defaultAccount: _this._parent.defaultAccount,\r\n                defaultBlock: _this._parent.defaultBlock,\r\n                handleRevert: _this._parent.handleRevert,\r\n                abiCoder: abi\r\n            })).createFunction();\r\n            return call(args.options, args.defaultBlock, args.callback);\r\n        case 'send':\r\n            // return error, if no \"from\" is specified\r\n            if (!utils.isAddress(args.options.from)) {\r\n                return utils._fireError(errors.ContractNoFromAddressDefinedError(), defer.eventEmitter, defer.reject, args.callback);\r\n            }\r\n            if (typeof this._method.payable === 'boolean' && !this._method.payable && args.options.value && args.options.value > 0) {\r\n                return utils._fireError(new Error('Can not send value to non-payable contract method or constructor'), defer.eventEmitter, defer.reject, args.callback);\r\n            }\r\n            // make sure receipt logs are decoded\r\n            var extraFormatters = {\r\n                receiptFormatter: function (receipt) {\r\n                    if (Array.isArray(receipt.logs)) {\r\n                        // decode logs\r\n                        var events = receipt.logs.map((log) => {\r\n                            return _this._parent._decodeEventABI.call({\r\n                                name: 'ALLEVENTS',\r\n                                jsonInterface: _this._parent.options.jsonInterface\r\n                            }, log);\r\n                        });\r\n                        // make log names keys\r\n                        receipt.events = {};\r\n                        var count = 0;\r\n                        events.forEach(function (ev) {\r\n                            if (ev.event) {\r\n                                // if > 1 of the same event, don't overwrite any existing events\r\n                                if (receipt.events[ev.event]) {\r\n                                    if (Array.isArray(receipt.events[ev.event])) {\r\n                                        receipt.events[ev.event].push(ev);\r\n                                    }\r\n                                    else {\r\n                                        receipt.events[ev.event] = [receipt.events[ev.event], ev];\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    receipt.events[ev.event] = ev;\r\n                                }\r\n                            }\r\n                            else {\r\n                                receipt.events[count] = ev;\r\n                                count++;\r\n                            }\r\n                        });\r\n                        delete receipt.logs;\r\n                    }\r\n                    return receipt;\r\n                },\r\n                contractDeployFormatter: function (receipt) {\r\n                    var newContract = _this._parent.clone();\r\n                    newContract.options.address = receipt.contractAddress;\r\n                    return newContract;\r\n                }\r\n            };\r\n            var sendTransaction = (new Method({\r\n                name: 'sendTransaction',\r\n                call: 'eth_sendTransaction',\r\n                params: 1,\r\n                inputFormatter: [formatters.inputTransactionFormatter],\r\n                requestManager: _this._parent._requestManager,\r\n                accounts: _this.constructor._ethAccounts || _this._ethAccounts,\r\n                defaultAccount: _this._parent.defaultAccount,\r\n                defaultBlock: _this._parent.defaultBlock,\r\n                transactionBlockTimeout: _this._parent.transactionBlockTimeout,\r\n                transactionConfirmationBlocks: _this._parent.transactionConfirmationBlocks,\r\n                transactionPollingTimeout: _this._parent.transactionPollingTimeout,\r\n                transactionPollingInterval: _this._parent.transactionPollingInterval,\r\n                defaultCommon: _this._parent.defaultCommon,\r\n                defaultChain: _this._parent.defaultChain,\r\n                defaultHardfork: _this._parent.defaultHardfork,\r\n                handleRevert: _this._parent.handleRevert,\r\n                extraFormatters: extraFormatters,\r\n                abiCoder: abi\r\n            })).createFunction();\r\n            return sendTransaction(args.options, args.callback);\r\n        default:\r\n            throw new Error('Method \"' + args.type + '\" not implemented.');\r\n    }\r\n};\r\nmodule.exports = Contract;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIA,IAAI,GAAGC,OAAO,CAAC,WAAD,CAAlB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,kBAAD,CAApB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,YAAD,CAAnB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,yBAAD,CAAP,CAAmCI,YAAtD;;AACA,IAAIC,UAAU,GAAGL,OAAO,CAAC,mBAAD,CAAP,CAA6BK,UAA9C;;AACA,IAAIC,MAAM,GAAGN,OAAO,CAAC,mBAAD,CAAP,CAA6BM,MAA1C;;AACA,IAAIC,UAAU,GAAGP,OAAO,CAAC,sBAAD,CAAxB;;AACA,IAAIQ,GAAG,GAAGR,OAAO,CAAC,cAAD,CAAjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIS,QAAQ,GAAG,SAASA,QAAT,CAAkBC,aAAlB,EAAiCC,OAAjC,EAA0CC,OAA1C,EAAmD;EAC9D,IAAIC,KAAK,GAAG,IAAZ;EAAA,IAAkBC,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAzB;;EACA,IAAI,EAAE,gBAAgBV,QAAlB,CAAJ,EAAiC;IAC7B,MAAM,IAAIW,KAAJ,CAAU,2EAAV,CAAN;EACH;;EACD,KAAKC,WAAL,GAAmB,YAAY;IAC3BtB,IAAI,CAACuB,WAAL,CAAiBT,KAAjB,EAAwBM,SAAxB;IACAN,KAAK,CAACU,kBAAN,GAA2BV,KAAK,CAACW,eAAN,CAAsBD,kBAAjD;EACH,CAHD,CAL8D,CAS9D;;;EACAxB,IAAI,CAACuB,WAAL,CAAiB,IAAjB,EAAuB,CAAC,KAAKG,WAAN,CAAvB;EACA,KAAKF,kBAAL,GAA0B,KAAKC,eAAL,CAAqBD,kBAA/C;;EACA,IAAI,CAACb,aAAD,IAAkB,CAAEK,KAAK,CAACW,OAAN,CAAchB,aAAd,CAAxB,EAAuD;IACnD,MAAMJ,MAAM,CAACqB,uBAAP,EAAN;EACH,CAd6D,CAe9D;;;EACA,KAAKf,OAAL,GAAe,EAAf;EACA,IAAIgB,OAAO,GAAGd,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAlB;;EACA,IAAI,CAAC,CAACD,OAAF,IAAa,OAAOA,OAAP,KAAmB,QAAhC,IAA4C,CAACb,KAAK,CAACW,OAAN,CAAcE,OAAd,CAAjD,EAAyE;IACrEhB,OAAO,GAAGgB,OAAV;IACA,KAAKhB,OAAL,GAAe,EAAE,GAAG,KAAKA,OAAV;MAAmB,GAAG,KAAKkB,uBAAL,CAA6BlB,OAA7B;IAAtB,CAAf;;IACA,IAAI,CAAC,CAACD,OAAF,IAAa,OAAOA,OAAP,KAAmB,QAApC,EAA8C;MAC1CA,OAAO,GAAG,IAAV;IACH;EACJ,CAxB6D,CAyB9D;;;EACAoB,MAAM,CAACC,cAAP,CAAsB,KAAKpB,OAA3B,EAAoC,SAApC,EAA+C;IAC3CqB,GAAG,EAAE,UAAUC,KAAV,EAAiB;MAClB,IAAIA,KAAJ,EAAW;QACPrB,KAAK,CAACsB,QAAN,GAAiBjC,KAAK,CAACkC,iBAAN,CAAwB/B,UAAU,CAACgC,qBAAX,CAAiCH,KAAjC,CAAxB,CAAjB;MACH;IACJ,CAL0C;IAM3CI,GAAG,EAAE,YAAY;MACb,OAAOzB,KAAK,CAACsB,QAAb;IACH,CAR0C;IAS3CI,UAAU,EAAE;EAT+B,CAA/C,EA1B8D,CAqC9D;;EACAR,MAAM,CAACC,cAAP,CAAsB,KAAKpB,OAA3B,EAAoC,eAApC,EAAqD;IACjDqB,GAAG,EAAE,UAAUC,KAAV,EAAiB;MAClBrB,KAAK,CAAC2B,OAAN,GAAgB,EAAhB;MACA3B,KAAK,CAAC4B,MAAN,GAAe,EAAf;MACA5B,KAAK,CAAC6B,cAAN,GAAuBR,KAAK,CAACS,GAAN,CAAU,UAAUC,MAAV,EAAkB;QAC/C,IAAIC,IAAJ,EAAUC,QAAV,CAD+C,CAE/C;;QACAF,MAAM,CAACG,QAAP,GAAmBH,MAAM,CAACI,eAAP,KAA2B,MAA3B,IAAqCJ,MAAM,CAACI,eAAP,KAA2B,MAAhE,IAA0EJ,MAAM,CAACG,QAApG;QACAH,MAAM,CAACK,OAAP,GAAkBL,MAAM,CAACI,eAAP,KAA2B,SAA3B,IAAwCJ,MAAM,CAACK,OAAjE;;QACA,IAAIL,MAAM,CAACM,IAAX,EAAiB;UACbJ,QAAQ,GAAG5C,KAAK,CAACiD,4BAAN,CAAmCP,MAAnC,CAAX;QACH,CAP8C,CAQ/C;;;QACA,IAAIA,MAAM,CAACQ,IAAP,KAAgB,UAApB,EAAgC;UAC5BR,MAAM,CAACS,SAAP,GAAmB7C,GAAG,CAAC8C,uBAAJ,CAA4BR,QAA5B,CAAnB;UACAD,IAAI,GAAGhC,KAAK,CAAC0C,eAAN,CAAsBC,IAAtB,CAA2B;YAC9BZ,MAAM,EAAEA,MADsB;YAE9Ba,MAAM,EAAE5C;UAFsB,CAA3B,CAAP,CAF4B,CAM5B;;UACA,IAAI,CAACA,KAAK,CAAC2B,OAAN,CAAcI,MAAM,CAACM,IAArB,CAAL,EAAiC;YAC7BrC,KAAK,CAAC2B,OAAN,CAAcI,MAAM,CAACM,IAArB,IAA6BL,IAA7B;UACH,CAFD,MAGK;YACD,IAAIa,WAAW,GAAG7C,KAAK,CAAC0C,eAAN,CAAsBC,IAAtB,CAA2B;cACzCZ,MAAM,EAAEA,MADiC;cAEzCa,MAAM,EAAE5C,KAFiC;cAGzC8C,UAAU,EAAE9C,KAAK,CAAC2B,OAAN,CAAcI,MAAM,CAACM,IAArB;YAH6B,CAA3B,CAAlB;;YAKArC,KAAK,CAAC2B,OAAN,CAAcI,MAAM,CAACM,IAArB,IAA6BQ,WAA7B;UACH,CAjB2B,CAkB5B;;;UACA7C,KAAK,CAAC2B,OAAN,CAAcI,MAAM,CAACS,SAArB,IAAkCR,IAAlC,CAnB4B,CAoB5B;;UACAhC,KAAK,CAAC2B,OAAN,CAAcM,QAAd,IAA0BD,IAA1B,CArB4B,CAsB5B;QACH,CAvBD,MAwBK,IAAID,MAAM,CAACQ,IAAP,KAAgB,OAApB,EAA6B;UAC9BR,MAAM,CAACS,SAAP,GAAmB7C,GAAG,CAACoD,oBAAJ,CAAyBd,QAAzB,CAAnB;;UACA,IAAIe,KAAK,GAAGhD,KAAK,CAACiD,GAAN,CAAUN,IAAV,CAAe3C,KAAf,EAAsB+B,MAAM,CAACS,SAA7B,CAAZ,CAF8B,CAG9B;;;UACA,IAAI,CAACxC,KAAK,CAAC4B,MAAN,CAAaG,MAAM,CAACM,IAApB,CAAD,IAA8BrC,KAAK,CAAC4B,MAAN,CAAaG,MAAM,CAACM,IAApB,EAA0BA,IAA1B,KAAmC,QAArE,EACIrC,KAAK,CAAC4B,MAAN,CAAaG,MAAM,CAACM,IAApB,IAA4BW,KAA5B,CAL0B,CAM9B;;UACAhD,KAAK,CAAC4B,MAAN,CAAaG,MAAM,CAACS,SAApB,IAAiCQ,KAAjC,CAP8B,CAQ9B;;UACAhD,KAAK,CAAC4B,MAAN,CAAaK,QAAb,IAAyBe,KAAzB;QACH;;QACD,OAAOjB,MAAP;MACH,CA7CsB,CAAvB,CAHkB,CAiDlB;;MACA/B,KAAK,CAAC4B,MAAN,CAAasB,SAAb,GAAyBlD,KAAK,CAACiD,GAAN,CAAUN,IAAV,CAAe3C,KAAf,EAAsB,WAAtB,CAAzB;MACA,OAAOA,KAAK,CAAC6B,cAAb;IACH,CArDgD;IAsDjDJ,GAAG,EAAE,YAAY;MACb,OAAOzB,KAAK,CAAC6B,cAAb;IACH,CAxDgD;IAyDjDH,UAAU,EAAE;EAzDqC,CAArD,EAtC8D,CAiG9D;;EACA,IAAIyB,cAAc,GAAG,KAAKvC,WAAL,CAAiBuC,cAAtC;EACA,IAAIC,YAAY,GAAG,KAAKxC,WAAL,CAAiBwC,YAAjB,IAAiC,QAApD;EACAlC,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,cAA5B,EAA4C;IACxCM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAcsD,YAAd,KAA+B,KAA/B,IAAwCrD,KAAK,CAACD,OAAN,CAAcsD,YAAd,KAA+B,IAA3E,EAAiF;QAC7E,OAAOrD,KAAK,CAACD,OAAN,CAAcsD,YAArB;MACH;;MACD,OAAO,KAAKzC,WAAL,CAAiByC,YAAxB;IACH,CANuC;IAOxCjC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAcsD,YAAd,GAA6BC,GAA7B;IACH,CATuC;IAUxC5B,UAAU,EAAE;EAV4B,CAA5C;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,eAA5B,EAA6C;IACzCM,GAAG,EAAE,YAAY;MACb,OAAOzB,KAAK,CAACD,OAAN,CAAcwD,MAAd,IAAwB,KAAK3C,WAAL,CAAiB4C,aAAhD;IACH,CAHwC;IAIzCpC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAcwD,MAAd,GAAuBD,GAAvB;IACH,CANwC;IAOzC5B,UAAU,EAAE;EAP6B,CAA7C;EASAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,iBAA5B,EAA+C;IAC3CM,GAAG,EAAE,YAAY;MACb,OAAOzB,KAAK,CAACD,OAAN,CAAc0D,QAAd,IAA0B,KAAK7C,WAAL,CAAiB8C,eAAlD;IACH,CAH0C;IAI3CtC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAc0D,QAAd,GAAyBH,GAAzB;IACH,CAN0C;IAO3C5B,UAAU,EAAE;EAP+B,CAA/C;EASAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,cAA5B,EAA4C;IACxCM,GAAG,EAAE,YAAY;MACb,OAAOzB,KAAK,CAACD,OAAN,CAAc4D,KAAd,IAAuB,KAAK/C,WAAL,CAAiBgD,YAA/C;IACH,CAHuC;IAIxCxC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAc4D,KAAd,GAAsBL,GAAtB;IACH,CANuC;IAOxC5B,UAAU,EAAE;EAP4B,CAA5C;EASAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,2BAA5B,EAAyD;IACrDM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAc8D,yBAAd,KAA4C,CAAhD,EAAmD;QAC/C,OAAO7D,KAAK,CAACD,OAAN,CAAc8D,yBAArB;MACH;;MACD,OAAO7D,KAAK,CAACD,OAAN,CAAc8D,yBAAd,IAA2C,KAAKjD,WAAL,CAAiBiD,yBAAnE;IACH,CANoD;IAOrDzC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAc8D,yBAAd,GAA0CP,GAA1C;IACH,CAToD;IAUrD5B,UAAU,EAAE;EAVyC,CAAzD;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,4BAA5B,EAA0D;IACtDM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAc+D,0BAAd,KAA6C,CAAjD,EAAoD;QAChD,OAAO9D,KAAK,CAACD,OAAN,CAAc+D,0BAArB;MACH;;MACD,OAAO9D,KAAK,CAACD,OAAN,CAAc+D,0BAAd,IAA4C,KAAKlD,WAAL,CAAiBkD,0BAApE;IACH,CANqD;IAOtD1C,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAc+D,0BAAd,GAA2CR,GAA3C;IACH,CATqD;IAUtD5B,UAAU,EAAE;EAV0C,CAA1D;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,+BAA5B,EAA6D;IACzDM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAcgE,6BAAd,KAAgD,CAApD,EAAuD;QACnD,OAAO/D,KAAK,CAACD,OAAN,CAAcgE,6BAArB;MACH;;MACD,OAAO/D,KAAK,CAACD,OAAN,CAAcgE,6BAAd,IAA+C,KAAKnD,WAAL,CAAiBmD,6BAAvE;IACH,CANwD;IAOzD3C,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAcgE,6BAAd,GAA8CT,GAA9C;IACH,CATwD;IAUzD5B,UAAU,EAAE;EAV6C,CAA7D;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,yBAA5B,EAAuD;IACnDM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAciE,uBAAd,KAA0C,CAA9C,EAAiD;QAC7C,OAAOhE,KAAK,CAACD,OAAN,CAAciE,uBAArB;MACH;;MACD,OAAOhE,KAAK,CAACD,OAAN,CAAciE,uBAAd,IAAyC,KAAKpD,WAAL,CAAiBoD,uBAAjE;IACH,CANkD;IAOnD5C,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAciE,uBAAd,GAAwCV,GAAxC;IACH,CATkD;IAUnD5B,UAAU,EAAE;EAVuC,CAAvD;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,oBAA5B,EAAkD;IAC9CM,GAAG,EAAE,YAAY;MACb,IAAIzB,KAAK,CAACD,OAAN,CAAckE,kBAAd,KAAqC,CAAzC,EAA4C;QACxC,OAAOjE,KAAK,CAACD,OAAN,CAAckE,kBAArB;MACH;;MACD,OAAOjE,KAAK,CAACD,OAAN,CAAckE,kBAAd,IAAoC,KAAKrD,WAAL,CAAiBqD,kBAA5D;IACH,CAN6C;IAO9C7C,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBtD,KAAK,CAACD,OAAN,CAAckE,kBAAd,GAAmCX,GAAnC;IACH,CAT6C;IAU9C5B,UAAU,EAAE;EAVkC,CAAlD;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,gBAA5B,EAA8C;IAC1CM,GAAG,EAAE,YAAY;MACb,OAAO0B,cAAP;IACH,CAHyC;IAI1C/B,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChB,IAAIA,GAAJ,EAAS;QACLH,cAAc,GAAG9D,KAAK,CAACkC,iBAAN,CAAwB/B,UAAU,CAACgC,qBAAX,CAAiC8B,GAAjC,CAAxB,CAAjB;MACH;;MACD,OAAOA,GAAP;IACH,CATyC;IAU1C5B,UAAU,EAAE;EAV8B,CAA9C;EAYAR,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4B,cAA5B,EAA4C;IACxCM,GAAG,EAAE,YAAY;MACb,OAAO2B,YAAP;IACH,CAHuC;IAIxChC,GAAG,EAAE,UAAUkC,GAAV,EAAe;MAChBF,YAAY,GAAGE,GAAf;MACA,OAAOA,GAAP;IACH,CAPuC;IAQxC5B,UAAU,EAAE;EAR4B,CAA5C,EAnN8D,CA6N9D;;EACA,KAAKC,OAAL,GAAe,EAAf;EACA,KAAKC,MAAL,GAAc,EAAd;EACA,KAAKN,QAAL,GAAgB,IAAhB;EACA,KAAKO,cAAL,GAAsB,EAAtB,CAjO8D,CAkO9D;;EACA,KAAK9B,OAAL,CAAaD,OAAb,GAAuBA,OAAvB;EACA,KAAKC,OAAL,CAAaF,aAAb,GAA6BA,aAA7B;AACH,CArOD;AAsOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAD,QAAQ,CAACY,WAAT,GAAuB,UAAU0D,QAAV,EAAoBC,QAApB,EAA8B;EACjD;EACAjF,IAAI,CAACuB,WAAL,CAAiB,IAAjB,EAAuB,CAACyD,QAAD,CAAvB;EACA,KAAKE,YAAL,GAAoBD,QAApB;AACH,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAvE,QAAQ,CAACO,SAAT,CAAmBkE,YAAnB,GAAkC,SAASC,WAAT,CAAqBrE,IAArB,EAA2B;EACzD,IAAIA,IAAI,IAAI,CAAC,CAACA,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAd,IAAmC,OAAOf,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAX,KAAiC,UAAxE,EAAoF;IAChF,OAAOf,IAAI,CAACsE,GAAL,EAAP,CADgF,CAC7D;EACtB;AACJ,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA3E,QAAQ,CAACO,SAAT,CAAmBqE,cAAnB,GAAoC,UAAUjC,IAAV,EAAgBS,KAAhB,EAAuB;EACvD,IAAIA,KAAK,KAAKT,IAAd,EAAoB;IAChB,MAAM9C,MAAM,CAACgF,0BAAP,CAAkClC,IAAlC,CAAN;EACH;AACJ,CAJD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA3C,QAAQ,CAACO,SAAT,CAAmBc,uBAAnB,GAA6C,SAASyD,sBAAT,CAAgC3E,OAAhC,EAAyC;EAClF,IAAI4E,QAAQ,GAAG5E,OAAO,CAAC4E,QAAR,GAAmBC,MAAM,CAAC7E,OAAO,CAAC4E,QAAT,CAAzB,GAA8C,IAA7D;EACA,IAAIE,IAAI,GAAG9E,OAAO,CAAC8E,IAAR,GAAexF,KAAK,CAACkC,iBAAN,CAAwB/B,UAAU,CAACgC,qBAAX,CAAiCzB,OAAO,CAAC8E,IAAzC,CAAxB,CAAf,GAAyF,IAApG;EACA9E,OAAO,CAAC+E,IAAR,GAAe/E,OAAO,CAAC+E,IAAR,IAAgB,KAAK/E,OAAL,CAAa+E,IAA5C;EACA/E,OAAO,CAAC8E,IAAR,GAAeA,IAAI,IAAI,KAAK9E,OAAL,CAAa8E,IAApC;EACA9E,OAAO,CAAC4E,QAAR,GAAmBA,QAAQ,IAAI,KAAK5E,OAAL,CAAa4E,QAA5C;EACA5E,OAAO,CAACgF,GAAR,GAAchF,OAAO,CAACgF,GAAR,IAAehF,OAAO,CAACiF,QAAvB,IAAmC,KAAKjF,OAAL,CAAagF,GAA9D,CANkF,CAOlF;;EACA,OAAOhF,OAAO,CAACiF,QAAf;EACA,OAAOjF,OAAP;AACH,CAVD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAH,QAAQ,CAACO,SAAT,CAAmB8E,eAAnB,GAAqC,UAAUjC,KAAV,EAAiBjD,OAAjB,EAA0B;EAC3DA,OAAO,GAAGA,OAAO,IAAI,EAArB;EACA,IAAImF,MAAM,GAAGnF,OAAO,CAACmF,MAAR,IAAkB,EAA/B;EAAA,IAAmCC,MAAM,GAAG,EAA5C;EACA,CAAC,WAAD,EAAc,SAAd,EAAyBD,MAAzB,CAAgC,UAAUE,CAAV,EAAa;IACzC,OAAOrF,OAAO,CAACqF,CAAD,CAAP,KAAeC,SAAtB;EACH,CAFD,EAEGC,OAFH,CAEW,UAAUF,CAAV,EAAa;IACpBD,MAAM,CAACC,CAAD,CAAN,GAAY5F,UAAU,CAAC+F,yBAAX,CAAqCxF,OAAO,CAACqF,CAAD,CAA5C,CAAZ;EACH,CAJD,EAH2D,CAQ3D;;EACA,IAAIlF,KAAK,CAACW,OAAN,CAAcd,OAAO,CAACyF,MAAtB,CAAJ,EAAmC;IAC/BL,MAAM,CAACK,MAAP,GAAgBzF,OAAO,CAACyF,MAAxB,CAD+B,CAE/B;EACH,CAHD,MAIK;IACDL,MAAM,CAACK,MAAP,GAAgB,EAAhB,CADC,CAED;;IACA,IAAIxC,KAAK,IAAI,CAACA,KAAK,CAACyC,SAAhB,IAA6BzC,KAAK,CAACX,IAAN,KAAe,WAAhD,EAA6D;MACzD8C,MAAM,CAACK,MAAP,CAAcE,IAAd,CAAmB1C,KAAK,CAACR,SAAzB;IACH,CALA,CAMD;;;IACA,IAAIQ,KAAK,CAACX,IAAN,KAAe,WAAnB,EAAgC;MAC5B,IAAIsD,aAAa,GAAG3C,KAAK,CAAC4C,MAAN,CAAaV,MAAb,CAAoB,UAAUW,CAAV,EAAa;QACjD,OAAOA,CAAC,CAACC,OAAF,KAAc,IAArB;MACH,CAFmB,EAEjBhE,GAFiB,CAEb,UAAU+D,CAAV,EAAa;QAChB,IAAIxE,KAAK,GAAG6D,MAAM,CAACW,CAAC,CAACxD,IAAH,CAAlB;;QACA,IAAI,CAAChB,KAAL,EAAY;UACR,OAAO,IAAP;QACH,CAJe,CAKhB;QACA;;;QACA,IAAInB,KAAK,CAACW,OAAN,CAAcQ,KAAd,CAAJ,EAA0B;UACtB,OAAOA,KAAK,CAACS,GAAN,CAAU,UAAUiE,CAAV,EAAa;YAC1B,OAAOpG,GAAG,CAACqG,eAAJ,CAAoBH,CAAC,CAACtD,IAAtB,EAA4BwD,CAA5B,CAAP;UACH,CAFM,CAAP;QAGH;;QACD,OAAOpG,GAAG,CAACqG,eAAJ,CAAoBH,CAAC,CAACtD,IAAtB,EAA4BlB,KAA5B,CAAP;MACH,CAfmB,CAApB;MAgBA8D,MAAM,CAACK,MAAP,GAAgBL,MAAM,CAACK,MAAP,CAAcS,MAAd,CAAqBN,aAArB,CAAhB;IACH;;IACD,IAAI,CAACR,MAAM,CAACK,MAAP,CAAcxE,MAAnB,EACI,OAAOmE,MAAM,CAACK,MAAd;EACP;;EACD,IAAI,KAAKzF,OAAL,CAAaD,OAAjB,EAA0B;IACtBqF,MAAM,CAACrF,OAAP,GAAiB,KAAKC,OAAL,CAAaD,OAAb,CAAqBoG,WAArB,EAAjB;EACH;;EACD,OAAOf,MAAP;AACH,CA9CD;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAvF,QAAQ,CAACO,SAAT,CAAmBgG,eAAnB,GAAqC,UAAUrB,IAAV,EAAgB;EACjD,IAAI9B,KAAK,GAAG,IAAZ;EACA8B,IAAI,CAACA,IAAL,GAAYA,IAAI,CAACA,IAAL,IAAa,EAAzB;EACAA,IAAI,CAACU,MAAL,GAAcV,IAAI,CAACU,MAAL,IAAe,EAA7B;EACA,IAAIL,MAAM,GAAG3F,UAAU,CAAC4G,kBAAX,CAA8BtB,IAA9B,CAAb,CAJiD,CAKjD;;EACA,IAAI9B,KAAK,CAACX,IAAN,KAAe,WAAnB,EAAgC;IAC5BW,KAAK,GAAGA,KAAK,CAACnD,aAAN,CAAoBwG,IAApB,CAAyB,UAAUC,IAAV,EAAgB;MAC7C,OAAQA,IAAI,CAAC9D,SAAL,KAAmBsC,IAAI,CAACU,MAAL,CAAY,CAAZ,CAA3B;IACH,CAFO,KAEF;MAAEC,SAAS,EAAE;IAAb,CAFN;EAGH,CAVgD,CAWjD;;;EACAzC,KAAK,CAAC4C,MAAN,GAAe5C,KAAK,CAAC4C,MAAN,IAAgB,EAA/B,CAZiD,CAajD;EACA;;EACA,IAAI,CAAC5C,KAAK,CAACyC,SAAX,EAAsB;IAClB,IAAIc,aAAa,GAAG,CAApB;IACAvD,KAAK,CAAC4C,MAAN,CAAaN,OAAb,CAAqBkB,KAAK,IAAIA,KAAK,CAACV,OAAN,GAAgBS,aAAa,EAA7B,GAAkC,IAAhE;;IACA,IAAIA,aAAa,GAAG,CAAhB,IAAsBzB,IAAI,CAACU,MAAL,CAAYxE,MAAZ,KAAuBuF,aAAa,GAAG,CAAjE,EAAqE;MACjEvD,KAAK,GAAG;QACJyC,SAAS,EAAE,IADP;QAEJG,MAAM,EAAE;MAFJ,CAAR;IAIH;EACJ;;EACD,IAAIa,SAAS,GAAGzD,KAAK,CAACyC,SAAN,GAAkBX,IAAI,CAACU,MAAvB,GAAgCV,IAAI,CAACU,MAAL,CAAYpF,KAAZ,CAAkB,CAAlB,CAAhD;EACA+E,MAAM,CAACuB,YAAP,GAAsB/G,GAAG,CAACgH,SAAJ,CAAc3D,KAAK,CAAC4C,MAApB,EAA4Bd,IAAI,CAACA,IAAjC,EAAuC2B,SAAvC,CAAtB;EACA,OAAOtB,MAAM,CAACuB,YAAP,CAAoBE,UAA3B,CA3BiD,CA4BjD;;EACAzB,MAAM,CAACnC,KAAP,GAAeA,KAAK,CAACX,IAArB,CA7BiD,CA8BjD;;EACA8C,MAAM,CAAC3C,SAAP,GAAoBQ,KAAK,CAACyC,SAAN,IAAmB,CAACX,IAAI,CAACU,MAAL,CAAY,CAAZ,CAArB,GAAuC,IAAvC,GAA8CV,IAAI,CAACU,MAAL,CAAY,CAAZ,CAAjE,CA/BiD,CAgCjD;;EACAL,MAAM,CAAC0B,GAAP,GAAa;IACT/B,IAAI,EAAEK,MAAM,CAACL,IADJ;IAETU,MAAM,EAAEL,MAAM,CAACK;EAFN,CAAb;EAIA,OAAOL,MAAM,CAACL,IAAd;EACA,OAAOK,MAAM,CAACK,MAAd;EACA,OAAOL,MAAP;AACH,CAxCD;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAvF,QAAQ,CAACO,SAAT,CAAmB2G,gBAAnB,GAAsC,SAASA,gBAAT,GAA4B;EAC9D,IAAIC,eAAe,GAAG,KAAKC,OAAL,CAAaxE,SAAnC;EAAA,IAA8CvC,IAAI,GAAG,KAAKK,SAAL,IAAkB,EAAvE;EACA,IAAIkC,SAAS,GAAG,KAAhB;EAAA,IAAuByE,SAAS,GAAG,KAAKC,OAAL,CAAanH,OAAb,CAAqBF,aAArB,CAAmCqF,MAAnC,CAA0C,UAAUiC,IAAV,EAAgB;IACzF,OAASJ,eAAe,KAAK,aAApB,IAAqCI,IAAI,CAAC5E,IAAL,KAAcwE,eAApD,IACH,CAACI,IAAI,CAAC3E,SAAL,KAAmBuE,eAAnB,IAAsCI,IAAI,CAAC3E,SAAL,KAAmBuE,eAAe,CAACK,OAAhB,CAAwB,IAAxB,EAA8B,EAA9B,CAAzD,IAA8FD,IAAI,CAAC9E,IAAL,KAAc0E,eAA7G,KAAiII,IAAI,CAAC5E,IAAL,KAAc,UADpJ;EAEH,CAHkC,EAGhCT,GAHgC,CAG5B,UAAUqF,IAAV,EAAgB;IACnB,IAAIE,WAAW,GAAInH,KAAK,CAACW,OAAN,CAAcsG,IAAI,CAACvB,MAAnB,CAAD,GAA+BuB,IAAI,CAACvB,MAAL,CAAY5E,MAA3C,GAAoD,CAAtE;;IACA,IAAIqG,WAAW,KAAKpH,IAAI,CAACe,MAAzB,EAAiC;MAC7B,MAAM,IAAIT,KAAJ,CAAU,2FAA2F8G,WAA3F,GAAyG,aAAnH,CAAN;IACH;;IACD,IAAIF,IAAI,CAAC5E,IAAL,KAAc,UAAlB,EAA8B;MAC1BC,SAAS,GAAG2E,IAAI,CAAC3E,SAAjB;IACH;;IACD,OAAOtC,KAAK,CAACW,OAAN,CAAcsG,IAAI,CAACvB,MAAnB,IAA6BuB,IAAI,CAACvB,MAAlC,GAA2C,EAAlD;EACH,CAZkC,EAYhC9D,GAZgC,CAY5B,UAAU8D,MAAV,EAAkB;IACrB,OAAOjG,GAAG,CAAC2H,gBAAJ,CAAqB1B,MAArB,EAA6B3F,IAA7B,EAAmCmH,OAAnC,CAA2C,IAA3C,EAAiD,EAAjD,CAAP;EACH,CAdkC,EAchC,CAdgC,KAc1B,EAdT,CAF8D,CAiB9D;;EACA,IAAIL,eAAe,KAAK,aAAxB,EAAuC;IACnC,IAAI,CAAC,KAAKQ,WAAV,EACI,MAAM,IAAIhH,KAAJ,CAAU,uGAAV,CAAN;;IACJ,IAAI,CAAC,KAAKgH,WAAL,CAAiBC,UAAjB,CAA4B,IAA5B,CAAL,EAAwC;MACpC,KAAKD,WAAL,GAAmB,OAAO,KAAKA,WAA/B;IACH;;IACD,OAAO,KAAKA,WAAL,GAAmBN,SAA1B;EACH,CAzB6D,CA0B9D;;;EACA,IAAIQ,WAAW,GAAIjF,SAAD,GAAcA,SAAS,GAAGyE,SAA1B,GAAsCA,SAAxD;;EACA,IAAI,CAACQ,WAAL,EAAkB;IACd,MAAM,IAAIlH,KAAJ,CAAU,sDAAsD,KAAKyG,OAAL,CAAa3E,IAAnE,GAA0E,IAApF,CAAN;EACH;;EACD,OAAOoF,WAAP;AACH,CAhCD;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA7H,QAAQ,CAACO,SAAT,CAAmBuH,mBAAnB,GAAyC,UAAUC,OAAV,EAAmBjB,YAAnB,EAAiC;EACtE,IAAI,CAACA,YAAL,EAAmB;IACf,OAAO,IAAP;EACH;;EACDA,YAAY,GAAGA,YAAY,CAAC1F,MAAb,IAAuB,CAAvB,GAA2B0F,YAAY,CAACtG,KAAb,CAAmB,CAAnB,CAA3B,GAAmDsG,YAAlE;EACA,IAAIvB,MAAM,GAAGxF,GAAG,CAACiI,gBAAJ,CAAqBD,OAArB,EAA8BjB,YAA9B,CAAb;;EACA,IAAIvB,MAAM,CAACyB,UAAP,KAAsB,CAA1B,EAA6B;IACzB,OAAOzB,MAAM,CAAC,CAAD,CAAb;EACH;;EACD,OAAOA,MAAM,CAACyB,UAAd;EACA,OAAOzB,MAAP;AACH,CAXD;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAvF,QAAQ,CAACO,SAAT,CAAmB0H,MAAnB,GAA4B,UAAU9H,OAAV,EAAmB+H,QAAnB,EAA6B;EACrD/H,OAAO,GAAGA,OAAO,IAAI,EAArB;EACAA,OAAO,CAACO,SAAR,GAAoBP,OAAO,CAACO,SAAR,IAAqB,EAAzC;EACAP,OAAO,GAAG,KAAKkB,uBAAL,CAA6BlB,OAA7B,CAAV,CAHqD,CAIrD;;EACA,IAAI,CAACA,OAAO,CAAC+E,IAAb,EAAmB;IACf,IAAI,OAAOgD,QAAP,KAAoB,UAAxB,EAAoC;MAChC,OAAOA,QAAQ,CAACrI,MAAM,CAACsI,8BAAP,EAAD,CAAf;IACH;;IACD,MAAMtI,MAAM,CAACsI,8BAAP,EAAN;EACH;;EACD,IAAInH,WAAW,GAAG,KAAKb,OAAL,CAAaF,aAAb,CAA2BwG,IAA3B,CAAiCtE,MAAD,IAAY;IAC1D,OAAQA,MAAM,CAACQ,IAAP,KAAgB,aAAxB;EACH,CAFiB,KAEZ,EAFN;EAGA3B,WAAW,CAAC4B,SAAZ,GAAwB,aAAxB;EACA,OAAO,KAAKE,eAAL,CAAqBsF,KAArB,CAA2B;IAC9BjG,MAAM,EAAEnB,WADsB;IAE9BgC,MAAM,EAAE,IAFsB;IAG9BqF,UAAU,EAAElI,OAAO,CAAC+E,IAHU;IAI9BV,YAAY,EAAE,KAAKxD,WAAL,CAAiBwD;EAJD,CAA3B,EAKJrE,OAAO,CAACO,SALJ,CAAP;AAMH,CArBD;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAV,QAAQ,CAACO,SAAT,CAAmB+H,qBAAnB,GAA2C,YAAY;EACnD,IAAIjI,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX,CADmD,CAEnD;;EACA,IAAIwH,QAAQ,GAAG,KAAKzD,YAAL,CAAkBpE,IAAlB,CAAf,CAHmD,CAInD;;;EACA,IAAIF,OAAO,GAAG,CAAC,CAAC,CAACE,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAN,IAA2B,OAAOf,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAvC,MAA8D,QAA9D,GAAyEf,IAAI,CAACsE,GAAL,EAAzE,GAAsF,EAApG;EACA,IAAI4D,SAAS,GAAI,OAAOlI,IAAI,CAAC,CAAD,CAAX,KAAmB,QAApB,GAAgCA,IAAI,CAAC,CAAD,CAApC,GAA0C,WAA1D;EACA,IAAI+C,KAAK,GAAImF,SAAS,CAACjC,WAAV,OAA4B,WAA7B,GAA4C;IACpD7D,IAAI,EAAE,WAD8C;IAEpDxC,aAAa,EAAE,KAAKE,OAAL,CAAaF;EAFwB,CAA5C,GAGR,KAAKE,OAAL,CAAaF,aAAb,CAA2BwG,IAA3B,CAAgC,UAAUc,IAAV,EAAgB;IAChD,OAAQA,IAAI,CAAC5E,IAAL,KAAc,OAAd,KAA0B4E,IAAI,CAAC9E,IAAL,KAAc8F,SAAd,IAA2BhB,IAAI,CAAC3E,SAAL,KAAmB,OAAO2F,SAAS,CAACf,OAAV,CAAkB,IAAlB,EAAwB,EAAxB,CAA/E,CAAR;EACH,CAFG,CAHJ;;EAMA,IAAI,CAACpE,KAAL,EAAY;IACR,MAAMvD,MAAM,CAAC2I,8BAAP,CAAsCD,SAAtC,CAAN;EACH;;EACD,IAAI,CAAC9I,KAAK,CAACgJ,SAAN,CAAgB,KAAKtI,OAAL,CAAaD,OAA7B,CAAL,EAA4C;IACxC,MAAML,MAAM,CAAC6I,6BAAP,EAAN;EACH;;EACD,OAAO;IACHC,MAAM,EAAE,KAAKtD,eAAL,CAAqBjC,KAArB,EAA4BjD,OAA5B,CADL;IAEHiD,KAAK,EAAEA,KAFJ;IAGH8E,QAAQ,EAAEA;EAHP,CAAP;AAKH,CAxBD;AAyBA;AACA;AACA;AACA;AACA;AACA;;;AACAlI,QAAQ,CAACO,SAAT,CAAmBqI,KAAnB,GAA2B,YAAY;EACnC,OAAO,IAAI,KAAK5H,WAAT,CAAqB,KAAKb,OAAL,CAAaF,aAAlC,EAAiD,KAAKE,OAAL,CAAaD,OAA9D,EAAuE,KAAKC,OAA5E,CAAP;AACH,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAH,QAAQ,CAACO,SAAT,CAAmBsI,IAAnB,GAA0B,UAAUzF,KAAV,EAAiBjD,OAAjB,EAA0B+H,QAA1B,EAAoC;EAC1D,IAAI7H,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX,CAD0D,CAE1D;;EACAwH,QAAQ,GAAG,KAAKzD,YAAL,CAAkBpE,IAAlB,CAAX;;EACA,IAAI,CAAC6H,QAAL,EAAe;IACX,MAAMrI,MAAM,CAACiJ,iCAAP,EAAN;EACH,CANyD,CAO1D;;;EACA,IAAI3I,OAAJ,EACI,OAAOA,OAAO,CAAC4I,SAAf,CATsD,CAU1D;;EACA,KAAK1F,GAAL,CAASD,KAAT,EAAgBjD,OAAhB,EAAyB,UAAU6I,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyB;IAC9CA,GAAG,CAACC,WAAJ;;IACA,IAAI,OAAOjB,QAAP,KAAoB,UAAxB,EAAoC;MAChCA,QAAQ,CAACc,GAAD,EAAMC,GAAN,EAAWC,GAAX,CAAR;IACH;EACJ,CALD;;EAMA,OAAOzD,SAAP;AACH,CAlBD;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAzF,QAAQ,CAACO,SAAT,CAAmB8C,GAAnB,GAAyB,YAAY;EACjC,IAAI+F,UAAU,GAAG,KAAKd,qBAAL,CAA2BF,KAA3B,CAAiC,IAAjC,EAAuC1H,SAAvC,CAAjB;;EACA,IAAI0I,UAAU,CAACT,MAAX,IAAqBS,UAAU,CAACT,MAAX,CAAkBU,OAA3C,EAAoD;IAChD,OAAOD,UAAU,CAACT,MAAX,CAAkBU,OAAzB;IACAC,OAAO,CAACC,IAAR,CAAa,gEAAb;EACH,CALgC,CAMjC;;;EACA,KAAK3E,cAAL,CAAoB,aAApB,EAAmCwE,UAAU,CAAChG,KAAX,CAAiBX,IAApD;;EACA,KAAKmC,cAAL,CAAoB,gBAApB,EAAsCwE,UAAU,CAAChG,KAAX,CAAiBX,IAAvD,EARiC,CASjC;EACA;;;EACA,IAAI9C,YAAY,GAAG,IAAID,YAAJ,CAAiB;IAChCC,YAAY,EAAE;MACVgJ,MAAM,EAAE,CADE;MAEVa,cAAc,EAAE,CAAC5J,UAAU,CAAC6J,iBAAZ,CAFN;MAGVC,eAAe,EAAE,KAAKnD,eAAL,CAAqBxD,IAArB,CAA0BqG,UAAU,CAAChG,KAArC,CAHP;MAIV;MACAuG,mBAAmB,EAAE,UAAUC,MAAV,EAAkB;QACnC,IAAIA,MAAM,CAACC,OAAX,EAAoB;UAChB,KAAKC,IAAL,CAAU,SAAV,EAAqBF,MAArB;QACH,CAFD,MAGK;UACD,KAAKE,IAAL,CAAU,MAAV,EAAkBF,MAAlB;QACH;;QACD,IAAI,OAAO,KAAK1B,QAAZ,KAAyB,UAA7B,EAAyC;UACrC,KAAKA,QAAL,CAAc,IAAd,EAAoB0B,MAApB,EAA4B,IAA5B;QACH;MACJ;IAfS,CADkB;IAkBhCjH,IAAI,EAAE,KAlB0B;IAmBhCoH,cAAc,EAAE,KAAKhJ;EAnBW,CAAjB,CAAnB;EAqBApB,YAAY,CAACqK,SAAb,CAAuB,MAAvB,EAA+BZ,UAAU,CAACT,MAA1C,EAAkDS,UAAU,CAAClB,QAAX,IAAuB,YAAY,CAAG,CAAxF;EACA,OAAOvI,YAAP;AACH,CAlCD;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAK,QAAQ,CAACO,SAAT,CAAmB0J,aAAnB,GAAmC,YAAY;EAC3C,IAAIb,UAAU,GAAG,KAAKd,qBAAL,CAA2BF,KAA3B,CAAiC,IAAjC,EAAuC1H,SAAvC,CAAjB;;EACA,IAAIwJ,WAAW,GAAG,IAAI1K,MAAJ,CAAW;IACzBiD,IAAI,EAAE,aADmB;IAEzBhC,IAAI,EAAE,aAFmB;IAGzBkI,MAAM,EAAE,CAHiB;IAIzBa,cAAc,EAAE,CAAC5J,UAAU,CAAC6J,iBAAZ,CAJS;IAKzBC,eAAe,EAAE,KAAKnD,eAAL,CAAqBxD,IAArB,CAA0BqG,UAAU,CAAChG,KAArC;EALQ,CAAX,CAAlB;EAOA8G,WAAW,CAACC,iBAAZ,CAA8B,KAAKpJ,eAAnC;EACA,IAAIN,IAAI,GAAGyJ,WAAW,CAACE,SAAZ,EAAX;EACAF,WAAW,GAAG,IAAd;EACA,OAAOzJ,IAAI,CAAC2I,UAAU,CAACT,MAAZ,EAAoBS,UAAU,CAAClB,QAA/B,CAAX;AACH,CAbD;AAcA;AACA;AACA;AACA;AACA;AACA;;;AACAlI,QAAQ,CAACO,SAAT,CAAmBuC,eAAnB,GAAqC,SAASA,eAAT,GAA2B;EAC5D,IAAIzC,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;EACA,IAAI2J,QAAQ,GAAG,EAAf;;EACA,IAAI,KAAKlI,MAAL,CAAYQ,IAAZ,KAAqB,UAAzB,EAAqC;IACjC0H,QAAQ,CAAC5J,IAAT,GAAgB,KAAKuC,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,MAA1C,CAAhB;IACAA,QAAQ,CAAC5J,IAAT,CAAc8J,OAAd,GAAwB,KAAKvH,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,MAA1C,EAAkD,IAAlD,CAAxB,CAFiC,CAEgD;EACpF;;EACDA,QAAQ,CAACG,IAAT,GAAgB,KAAKxH,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,MAA1C,CAAhB;EACAA,QAAQ,CAACG,IAAT,CAAcD,OAAd,GAAwB,KAAKvH,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,MAA1C,EAAkD,IAAlD,CAAxB,CAR4D,CAQqB;;EACjFA,QAAQ,CAACI,SAAT,GAAqB,KAAKzH,MAAL,CAAYkE,gBAAZ,CAA6BnE,IAA7B,CAAkCsH,QAAlC,CAArB;EACAA,QAAQ,CAACK,WAAT,GAAuB,KAAK1H,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,UAA1C,CAAvB;EACAA,QAAQ,CAACM,gBAAT,GAA4B,KAAK3H,MAAL,CAAYsH,cAAZ,CAA2BvH,IAA3B,CAAgCsH,QAAhC,EAA0C,kBAA1C,CAA5B;;EACA,IAAIhK,IAAI,IAAI,KAAK8B,MAAL,CAAY6D,MAApB,IAA8B3F,IAAI,CAACe,MAAL,KAAgB,KAAKe,MAAL,CAAY6D,MAAZ,CAAmB5E,MAArE,EAA6E;IACzE,IAAI,KAAK8B,UAAT,EAAqB;MACjB,OAAO,KAAKA,UAAL,CAAgBkF,KAAhB,CAAsB,IAAtB,EAA4B/H,IAA5B,CAAP;IACH;;IACD,MAAMR,MAAM,CAAC+K,qBAAP,CAA6BvK,IAAI,CAACe,MAAlC,EAA0C,KAAKe,MAAL,CAAY6D,MAAZ,CAAmB5E,MAA7D,EAAqE,KAAKe,MAAL,CAAYM,IAAjF,CAAN;EACH;;EACD4H,QAAQ,CAAC3J,SAAT,GAAqBL,IAAI,IAAI,EAA7B;EACAgK,QAAQ,CAACjD,OAAT,GAAmB,KAAKjF,MAAxB;EACAkI,QAAQ,CAAC/C,OAAT,GAAmB,KAAKtE,MAAxB;EACAqH,QAAQ,CAAC7F,YAAT,GAAwB,KAAKxB,MAAL,CAAYhC,WAAZ,CAAwBwD,YAAxB,IAAwC,KAAKA,YAArE;;EACA,IAAI,KAAK6D,UAAT,EAAqB;IACjBgC,QAAQ,CAAC1C,WAAT,GAAuB,KAAKU,UAA5B;EACH;;EACD,OAAOgC,QAAP;AACH,CA1BD;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACArK,QAAQ,CAACO,SAAT,CAAmBsK,wBAAnB,GAA8C,SAASA,wBAAT,CAAkCxK,IAAlC,EAAwCyK,KAAxC,EAA+C;EACzF,IAAIC,aAAa,GAAG,EAApB;EACAA,aAAa,CAACpI,IAAd,GAAqBtC,IAAI,CAAC2K,KAAL,EAArB,CAFyF,CAGzF;;EACAD,aAAa,CAAC7C,QAAd,GAAyB,KAAKZ,OAAL,CAAa7C,YAAb,CAA0BpE,IAA1B,CAAzB,CAJyF,CAKzF;;EACA,IAAI0K,aAAa,CAACpI,IAAd,KAAuB,MAAvB,IAAiCtC,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAJ,KAA0B,IAA3D,KAAoE,OAAOf,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAX,KAAiC,QAAjC,IAA6C6J,QAAQ,CAAC5K,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAL,CAAzH,CAAJ,EACI2J,aAAa,CAACvH,YAAd,GAA6BnD,IAAI,CAACsE,GAAL,EAA7B,CAPqF,CAQzF;;EACAoG,aAAa,CAAC5K,OAAd,GAAwB,CAAC,CAAC,CAACE,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAN,IAA2B,OAAOf,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAvC,MAA8D,QAA9D,GAAyEf,IAAI,CAACsE,GAAL,EAAzE,GAAsF,EAA9G,CATyF,CAUzF;;EACAoG,aAAa,CAACG,eAAd,GAAiC7K,IAAI,CAACA,IAAI,CAACe,MAAL,GAAc,CAAf,CAAJ,KAA0B,IAA3B,GAAmCf,IAAI,CAACsE,GAAL,EAAnC,GAAgD,KAAhF;EACAoG,aAAa,CAAC5K,OAAd,GAAwB,KAAKmH,OAAL,CAAajG,uBAAb,CAAqC0J,aAAa,CAAC5K,OAAnD,CAAxB;EACA4K,aAAa,CAAC5K,OAAd,CAAsB+E,IAAtB,GAA6B,KAAKuF,SAAL,EAA7B,CAbyF,CAczF;;EACA,IAAI,CAAC,KAAK9C,WAAN,IAAqB,CAAClI,KAAK,CAACgJ,SAAN,CAAgB,KAAKnB,OAAL,CAAanH,OAAb,CAAqBD,OAArC,CAA1B,EACI,MAAML,MAAM,CAAC6I,6BAAP,EAAN;EACJ,IAAI,CAAC,KAAKf,WAAV,EACIoD,aAAa,CAAC5K,OAAd,CAAsBgL,EAAtB,GAA2B,KAAK7D,OAAL,CAAanH,OAAb,CAAqBD,OAAhD,CAlBqF,CAmBzF;;EACA,IAAI,CAAC6K,aAAa,CAAC5K,OAAd,CAAsB+E,IAA3B,EACI,OAAOzF,KAAK,CAAC2L,UAAN,CAAiB,IAAIzK,KAAJ,CAAU,kFAAV,CAAjB,EAAgHmK,KAAK,CAACO,YAAtH,EAAoIP,KAAK,CAACQ,MAA1I,EAAkJP,aAAa,CAAC7C,QAAhK,CAAP;EACJ,OAAO6C,aAAP;AACH,CAvBD;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA/K,QAAQ,CAACO,SAAT,CAAmB+J,cAAnB,GAAoC,SAASA,cAAT,GAA0B;EAC1D,IAAIlK,KAAK,GAAG,IAAZ;EAAA,IAAkBC,IAAI,GAAG,KAAKiH,OAAL,CAAauD,wBAAb,CAAsCpK,IAAtC,CAA2C,IAA3C,EAAiDH,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAjD,EAAwFoK,KAAxF,CAAzB;EAAA,IAAyHA,KAAK,GAAGhL,UAAU,CAAEO,IAAI,CAACsC,IAAL,KAAc,MAAhB,CAA3I;EAAA,IAAqK4I,WAAW,GAAGnL,KAAK,CAACY,WAAN,CAAkBwD,YAAlB,IAAkCpE,KAAK,CAACoE,YAA3N,CAD0D,CAE1D;;;EACA,IAAInE,IAAI,CAAC6K,eAAT,EAA0B;IACtB,IAAIM,OAAO,GAAG;MACV7C,MAAM,EAAE,CAAC/I,UAAU,CAAC6L,kBAAX,CAA8BhL,IAA9B,CAAmC,KAAK6G,OAAxC,EAAiDjH,IAAI,CAACF,OAAtD,CAAD,CADE;MAEV+H,QAAQ,EAAE7H,IAAI,CAAC6H;IAFL,CAAd;;IAIA,IAAI7H,IAAI,CAACsC,IAAL,KAAc,MAAlB,EAA0B;MACtB6I,OAAO,CAAC7C,MAAR,CAAe7C,IAAf,CAAoBlG,UAAU,CAAC8L,gCAAX,CAA4CjL,IAA5C,CAAiD,KAAK6G,OAAtD,EAA+DjH,IAAI,CAACmD,YAApE,CAApB;MACAgI,OAAO,CAACrJ,MAAR,GAAiB,UAAjB;MACAqJ,OAAO,CAACG,MAAR,GAAiB,KAAKrE,OAAL,CAAaQ,mBAAb,CAAiC/E,IAAjC,CAAsC,IAAtC,EAA4C,KAAKqE,OAAL,CAAaW,OAAzD,CAAjB;IACH,CAJD,MAKK;MACDyD,OAAO,CAACrJ,MAAR,GAAiB,qBAAjB;IACH;;IACD,OAAOqJ,OAAP;EACH;;EACD,QAAQnL,IAAI,CAACsC,IAAb;IACI,KAAK,kBAAL;MACI;MACA,IAAI,CAAClD,KAAK,CAACgJ,SAAN,CAAgBpI,IAAI,CAACF,OAAL,CAAa8E,IAA7B,CAAL,EAAyC;QACrC,OAAOxF,KAAK,CAAC2L,UAAN,CAAiBvL,MAAM,CAAC+L,iCAAP,EAAjB,EAA6Dd,KAAK,CAACO,YAAnE,EAAiFP,KAAK,CAACQ,MAAvF,EAA+FjL,IAAI,CAAC6H,QAApG,CAAP;MACH;;MACD,IAAIyC,gBAAgB,GAAI,IAAInL,MAAJ,CAAW;QAC/BiD,IAAI,EAAE,kBADyB;QAE/BhC,IAAI,EAAE,sBAFyB;QAG/BkI,MAAM,EAAE,CAHuB;QAI/Ba,cAAc,EAAE,CAAC5J,UAAU,CAACiM,yBAAZ,EAAuCjM,UAAU,CAAC8L,gCAAlD,CAJe;QAK/B3B,cAAc,EAAE3J,KAAK,CAACkH,OAAN,CAAcvG,eALC;QAM/BwD,QAAQ,EAAEgH,WANqB;QAO/BhI,cAAc,EAAEnD,KAAK,CAACkH,OAAN,CAAc/D,cAPC;QAQ/BC,YAAY,EAAEpD,KAAK,CAACkH,OAAN,CAAc9D;MARG,CAAX,CAAD,CASnBsI,cATmB,EAAvB;MAUA,OAAOnB,gBAAgB,CAACtK,IAAI,CAACF,OAAN,EAAeE,IAAI,CAAC6H,QAApB,CAAvB;;IACJ,KAAK,UAAL;MACI,IAAIwC,WAAW,GAAI,IAAIlL,MAAJ,CAAW;QAC1BiD,IAAI,EAAE,aADoB;QAE1BhC,IAAI,EAAE,iBAFoB;QAG1BkI,MAAM,EAAE,CAHkB;QAI1Ba,cAAc,EAAE,CAAC5J,UAAU,CAAC6L,kBAAZ,CAJU;QAK1B/B,eAAe,EAAEjK,KAAK,CAACsM,WALG;QAM1BhC,cAAc,EAAE3J,KAAK,CAACkH,OAAN,CAAcvG,eANJ;QAO1BwD,QAAQ,EAAEgH,WAPgB;QAQ1BhI,cAAc,EAAEnD,KAAK,CAACkH,OAAN,CAAc/D,cARJ;QAS1BC,YAAY,EAAEpD,KAAK,CAACkH,OAAN,CAAc9D;MATF,CAAX,CAAD,CAUdsI,cAVc,EAAlB;MAWA,OAAOpB,WAAW,CAACrK,IAAI,CAACF,OAAN,EAAeE,IAAI,CAAC6H,QAApB,CAAlB;;IACJ,KAAK,MAAL;MACI;MACA,IAAIzH,IAAI,GAAI,IAAIjB,MAAJ,CAAW;QACnBiD,IAAI,EAAE,MADa;QAEnBhC,IAAI,EAAE,UAFa;QAGnBkI,MAAM,EAAE,CAHW;QAInBa,cAAc,EAAE,CAAC5J,UAAU,CAAC6L,kBAAZ,EAAgC7L,UAAU,CAAC8L,gCAA3C,CAJG;QAKnB;QACAhC,eAAe,EAAE,UAAUnE,MAAV,EAAkB;UAC/B,OAAOnF,KAAK,CAACkH,OAAN,CAAcQ,mBAAd,CAAkC1H,KAAK,CAACgH,OAAN,CAAcW,OAAhD,EAAyDxC,MAAzD,CAAP;QACH,CARkB;QASnBwE,cAAc,EAAE3J,KAAK,CAACkH,OAAN,CAAcvG,eATX;QAUnBwD,QAAQ,EAAEgH,WAVS;QAWnBhI,cAAc,EAAEnD,KAAK,CAACkH,OAAN,CAAc/D,cAXX;QAYnBC,YAAY,EAAEpD,KAAK,CAACkH,OAAN,CAAc9D,YAZT;QAanBC,YAAY,EAAErD,KAAK,CAACkH,OAAN,CAAc7D,YAbT;QAcnBuI,QAAQ,EAAEjM;MAdS,CAAX,CAAD,CAeP+L,cAfO,EAAX;MAgBA,OAAOrL,IAAI,CAACJ,IAAI,CAACF,OAAN,EAAeE,IAAI,CAACmD,YAApB,EAAkCnD,IAAI,CAAC6H,QAAvC,CAAX;;IACJ,KAAK,MAAL;MACI;MACA,IAAI,CAACzI,KAAK,CAACgJ,SAAN,CAAgBpI,IAAI,CAACF,OAAL,CAAa8E,IAA7B,CAAL,EAAyC;QACrC,OAAOxF,KAAK,CAAC2L,UAAN,CAAiBvL,MAAM,CAAC+L,iCAAP,EAAjB,EAA6Dd,KAAK,CAACO,YAAnE,EAAiFP,KAAK,CAACQ,MAAvF,EAA+FjL,IAAI,CAAC6H,QAApG,CAAP;MACH;;MACD,IAAI,OAAO,KAAKd,OAAL,CAAa5E,OAApB,KAAgC,SAAhC,IAA6C,CAAC,KAAK4E,OAAL,CAAa5E,OAA3D,IAAsEnC,IAAI,CAACF,OAAL,CAAasB,KAAnF,IAA4FpB,IAAI,CAACF,OAAL,CAAasB,KAAb,GAAqB,CAArH,EAAwH;QACpH,OAAOhC,KAAK,CAAC2L,UAAN,CAAiB,IAAIzK,KAAJ,CAAU,kEAAV,CAAjB,EAAgGmK,KAAK,CAACO,YAAtG,EAAoHP,KAAK,CAACQ,MAA1H,EAAkIjL,IAAI,CAAC6H,QAAvI,CAAP;MACH,CAPL,CAQI;;;MACA,IAAI+D,eAAe,GAAG;QAClBC,gBAAgB,EAAE,UAAUC,OAAV,EAAmB;UACjC,IAAI7L,KAAK,CAACW,OAAN,CAAckL,OAAO,CAACC,IAAtB,CAAJ,EAAiC;YAC7B;YACA,IAAIpK,MAAM,GAAGmK,OAAO,CAACC,IAAR,CAAalK,GAAb,CAAkBmK,GAAD,IAAS;cACnC,OAAOjM,KAAK,CAACkH,OAAN,CAAcf,eAAd,CAA8B9F,IAA9B,CAAmC;gBACtCgC,IAAI,EAAE,WADgC;gBAEtCxC,aAAa,EAAEG,KAAK,CAACkH,OAAN,CAAcnH,OAAd,CAAsBF;cAFC,CAAnC,EAGJoM,GAHI,CAAP;YAIH,CALY,CAAb,CAF6B,CAQ7B;;YACAF,OAAO,CAACnK,MAAR,GAAiB,EAAjB;YACA,IAAIsK,KAAK,GAAG,CAAZ;YACAtK,MAAM,CAAC0D,OAAP,CAAe,UAAU6G,EAAV,EAAc;cACzB,IAAIA,EAAE,CAACnJ,KAAP,EAAc;gBACV;gBACA,IAAI+I,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,CAAJ,EAA8B;kBAC1B,IAAI9C,KAAK,CAACW,OAAN,CAAckL,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,CAAd,CAAJ,EAA6C;oBACzC+I,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,EAAyB0C,IAAzB,CAA8ByG,EAA9B;kBACH,CAFD,MAGK;oBACDJ,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,IAA2B,CAAC+I,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,CAAD,EAA2BmJ,EAA3B,CAA3B;kBACH;gBACJ,CAPD,MAQK;kBACDJ,OAAO,CAACnK,MAAR,CAAeuK,EAAE,CAACnJ,KAAlB,IAA2BmJ,EAA3B;gBACH;cACJ,CAbD,MAcK;gBACDJ,OAAO,CAACnK,MAAR,CAAesK,KAAf,IAAwBC,EAAxB;gBACAD,KAAK;cACR;YACJ,CAnBD;YAoBA,OAAOH,OAAO,CAACC,IAAf;UACH;;UACD,OAAOD,OAAP;QACH,CApCiB;QAqClBK,uBAAuB,EAAE,UAAUL,OAAV,EAAmB;UACxC,IAAIM,WAAW,GAAGrM,KAAK,CAACkH,OAAN,CAAcsB,KAAd,EAAlB;;UACA6D,WAAW,CAACtM,OAAZ,CAAoBD,OAApB,GAA8BiM,OAAO,CAACO,eAAtC;UACA,OAAOD,WAAP;QACH;MAzCiB,CAAtB;MA2CA,IAAIE,eAAe,GAAI,IAAInN,MAAJ,CAAW;QAC9BiD,IAAI,EAAE,iBADwB;QAE9BhC,IAAI,EAAE,qBAFwB;QAG9BkI,MAAM,EAAE,CAHsB;QAI9Ba,cAAc,EAAE,CAAC5J,UAAU,CAACiM,yBAAZ,CAJc;QAK9B9B,cAAc,EAAE3J,KAAK,CAACkH,OAAN,CAAcvG,eALA;QAM9BwD,QAAQ,EAAEnE,KAAK,CAACY,WAAN,CAAkBwD,YAAlB,IAAkCpE,KAAK,CAACoE,YANpB;QAO9BjB,cAAc,EAAEnD,KAAK,CAACkH,OAAN,CAAc/D,cAPA;QAQ9BC,YAAY,EAAEpD,KAAK,CAACkH,OAAN,CAAc9D,YARE;QAS9BY,uBAAuB,EAAEhE,KAAK,CAACkH,OAAN,CAAclD,uBATT;QAU9BD,6BAA6B,EAAE/D,KAAK,CAACkH,OAAN,CAAcnD,6BAVf;QAW9BF,yBAAyB,EAAE7D,KAAK,CAACkH,OAAN,CAAcrD,yBAXX;QAY9BC,0BAA0B,EAAE9D,KAAK,CAACkH,OAAN,CAAcpD,0BAZZ;QAa9BN,aAAa,EAAExD,KAAK,CAACkH,OAAN,CAAc1D,aAbC;QAc9BI,YAAY,EAAE5D,KAAK,CAACkH,OAAN,CAActD,YAdE;QAe9BF,eAAe,EAAE1D,KAAK,CAACkH,OAAN,CAAcxD,eAfD;QAgB9BL,YAAY,EAAErD,KAAK,CAACkH,OAAN,CAAc7D,YAhBE;QAiB9BwI,eAAe,EAAEA,eAjBa;QAkB9BD,QAAQ,EAAEjM;MAlBoB,CAAX,CAAD,CAmBlB+L,cAnBkB,EAAtB;MAoBA,OAAOa,eAAe,CAACtM,IAAI,CAACF,OAAN,EAAeE,IAAI,CAAC6H,QAApB,CAAtB;;IACJ;MACI,MAAM,IAAIvH,KAAJ,CAAU,aAAaN,IAAI,CAACsC,IAAlB,GAAyB,oBAAnC,CAAN;EA3HR;AA6HH,CA/ID;;AAgJAiK,MAAM,CAACC,OAAP,GAAiB7M,QAAjB"},"metadata":{},"sourceType":"script"}