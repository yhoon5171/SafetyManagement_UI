{"ast":null,"code":"var xhr = require('xhr');\n\nvar normalize = require('./normalize-response');\n\nvar noop = function () {};\n\nmodule.exports = xhrRequest;\n\nfunction xhrRequest(opt, cb) {\n  delete opt.uri; // for better JSON.parse error handling than xhr module\n\n  var useJson = false;\n\n  if (opt.responseType === 'json') {\n    opt.responseType = 'text';\n    useJson = true;\n  }\n\n  var req = xhr(opt, function xhrRequestResult(err, resp, body) {\n    if (useJson && !err) {\n      try {\n        var text = resp.rawRequest.responseText;\n        body = JSON.parse(text);\n      } catch (e) {\n        err = e;\n      }\n    }\n\n    resp = normalize(opt, resp);\n    if (err) cb(err, null, resp);else cb(err, body, resp);\n    cb = noop;\n  }); // Patch abort() so that it also calls the callback, but with an error\n\n  var onabort = req.onabort;\n\n  req.onabort = function () {\n    var ret = onabort.apply(req, Array.prototype.slice.call(arguments));\n    cb(new Error('XHR Aborted'));\n    cb = noop;\n    return ret;\n  };\n\n  return req;\n}","map":{"version":3,"names":["xhr","require","normalize","noop","module","exports","xhrRequest","opt","cb","uri","useJson","responseType","req","xhrRequestResult","err","resp","body","text","rawRequest","responseText","JSON","parse","e","onabort","ret","apply","Array","prototype","slice","call","arguments","Error"],"sources":["D:/공프기/Capstone test/SafetyManagement_UI/client/node_modules/xhr-request/lib/request-browser.js"],"sourcesContent":["var xhr = require('xhr')\r\nvar normalize = require('./normalize-response')\r\nvar noop = function () {}\r\n\r\nmodule.exports = xhrRequest\r\nfunction xhrRequest (opt, cb) {\r\n  delete opt.uri\r\n\r\n  // for better JSON.parse error handling than xhr module\r\n  var useJson = false\r\n  if (opt.responseType === 'json') {\r\n    opt.responseType = 'text'\r\n    useJson = true\r\n  }\r\n\r\n  var req = xhr(opt, function xhrRequestResult (err, resp, body) {\r\n    if (useJson && !err) {\r\n      try {\r\n        var text = resp.rawRequest.responseText\r\n        body = JSON.parse(text)\r\n      } catch (e) {\r\n        err = e\r\n      }\r\n    }\r\n\r\n    resp = normalize(opt, resp)\r\n    if (err) cb(err, null, resp)\r\n    else cb(err, body, resp)\r\n    cb = noop\r\n  })\r\n\r\n  // Patch abort() so that it also calls the callback, but with an error\r\n  var onabort = req.onabort\r\n  req.onabort = function () {\r\n    var ret = onabort.apply(req, Array.prototype.slice.call(arguments))\r\n    cb(new Error('XHR Aborted'))\r\n    cb = noop\r\n    return ret\r\n  }\r\n\r\n  return req\r\n}\r\n"],"mappings":"AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,sBAAD,CAAvB;;AACA,IAAIE,IAAI,GAAG,YAAY,CAAE,CAAzB;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,UAAjB;;AACA,SAASA,UAAT,CAAqBC,GAArB,EAA0BC,EAA1B,EAA8B;EAC5B,OAAOD,GAAG,CAACE,GAAX,CAD4B,CAG5B;;EACA,IAAIC,OAAO,GAAG,KAAd;;EACA,IAAIH,GAAG,CAACI,YAAJ,KAAqB,MAAzB,EAAiC;IAC/BJ,GAAG,CAACI,YAAJ,GAAmB,MAAnB;IACAD,OAAO,GAAG,IAAV;EACD;;EAED,IAAIE,GAAG,GAAGZ,GAAG,CAACO,GAAD,EAAM,SAASM,gBAAT,CAA2BC,GAA3B,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4C;IAC7D,IAAIN,OAAO,IAAI,CAACI,GAAhB,EAAqB;MACnB,IAAI;QACF,IAAIG,IAAI,GAAGF,IAAI,CAACG,UAAL,CAAgBC,YAA3B;QACAH,IAAI,GAAGI,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;MACD,CAHD,CAGE,OAAOK,CAAP,EAAU;QACVR,GAAG,GAAGQ,CAAN;MACD;IACF;;IAEDP,IAAI,GAAGb,SAAS,CAACK,GAAD,EAAMQ,IAAN,CAAhB;IACA,IAAID,GAAJ,EAASN,EAAE,CAACM,GAAD,EAAM,IAAN,EAAYC,IAAZ,CAAF,CAAT,KACKP,EAAE,CAACM,GAAD,EAAME,IAAN,EAAYD,IAAZ,CAAF;IACLP,EAAE,GAAGL,IAAL;EACD,CAdY,CAAb,CAV4B,CA0B5B;;EACA,IAAIoB,OAAO,GAAGX,GAAG,CAACW,OAAlB;;EACAX,GAAG,CAACW,OAAJ,GAAc,YAAY;IACxB,IAAIC,GAAG,GAAGD,OAAO,CAACE,KAAR,CAAcb,GAAd,EAAmBc,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAnB,CAAV;IACAtB,EAAE,CAAC,IAAIuB,KAAJ,CAAU,aAAV,CAAD,CAAF;IACAvB,EAAE,GAAGL,IAAL;IACA,OAAOqB,GAAP;EACD,CALD;;EAOA,OAAOZ,GAAP;AACD"},"metadata":{},"sourceType":"script"}