{"ast":null,"code":"const debug = require(\"debug\")(\"contract:utils\"); // eslint-disable-line no-unused-vars\n\n\nconst web3Utils = require(\"web3-utils\");\n\nconst bigNumberify = require(\"ethers/utils/bignumber\").bigNumberify;\n\nconst abi = require(\"web3-eth-abi\");\n\nconst BlockchainUtils = require(\"@truffle/blockchain-utils\");\n\nconst reformat = require(\"./reformat\");\n\nconst Utils = {\n  is_object(val) {\n    return typeof val === \"object\" && !Array.isArray(val);\n  },\n\n  is_big_number(val) {\n    if (typeof val !== \"object\") return false;\n    return web3Utils.isBN(val) || web3Utils.isBigNumber(val);\n  },\n\n  is_tx_params(val) {\n    if (!Utils.is_object(val)) return false;\n    if (Utils.is_big_number(val)) return false;\n    const allowed_fields = {\n      from: true,\n      to: true,\n      gas: true,\n      gasPrice: true,\n      value: true,\n      data: true,\n      nonce: true,\n      privateFor: true\n    };\n\n    for (let field_name of Object.keys(val)) {\n      if (allowed_fields[field_name]) return true;\n    }\n\n    return false;\n  },\n\n  decodeLogs(_logs, isSingle) {\n    const constructor = this;\n    const logs = Utils.toTruffleLog(_logs, isSingle);\n    return logs.map(log => {\n      const logABI = constructor.events[log.topics[0]];\n\n      if (logABI == null) {\n        return null;\n      }\n\n      const copy = Utils.merge({}, log);\n      copy.event = logABI.name;\n      copy.topics = logABI.anonymous ? copy.topics : copy.topics.slice(1);\n\n      if (copy.data === \"0x\") {\n        copy.data = \"\";\n      }\n\n      let logArgs;\n\n      try {\n        logArgs = abi.decodeLog(logABI.inputs, copy.data, copy.topics);\n      } catch (_) {\n        return null;\n      }\n\n      copy.args = reformat.numbers.call(constructor, logArgs, logABI.inputs);\n      delete copy.data;\n      delete copy.topics;\n      return copy;\n    }).filter(log => log != null);\n  },\n\n  toTruffleLog(events, isSingle) {\n    // Transform singletons (from event listeners) to the kind of\n    // object we find on the receipt\n    if (isSingle && typeof isSingle === \"boolean\") {\n      const temp = [];\n      temp.push(events);\n      return temp.map(log => {\n        log.data = log.raw.data;\n        log.topics = log.raw.topics;\n        return log;\n      });\n    } // Or reformat items in the existing array\n\n\n    events.forEach(event => {\n      if (event.raw) {\n        event.data = event.raw.data;\n        event.topics = event.raw.topics;\n      }\n    });\n    return events;\n  },\n\n  merge() {\n    const merged = {};\n    const args = Array.prototype.slice.call(arguments);\n\n    for (let i = 0; i < args.length; i++) {\n      const object = args[i];\n      const keys = Object.keys(object);\n\n      for (let j = 0; j < keys.length; j++) {\n        const key = keys[j];\n        const value = object[key];\n        merged[key] = value;\n      }\n    }\n\n    return merged;\n  },\n\n  parallel(arr) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n\n    if (!arr.length) {\n      return callback(null, []);\n    }\n\n    let index = 0;\n    const results = new Array(arr.length);\n    arr.forEach((fn, position) => {\n      fn((err, result) => {\n        if (err) {\n          callback(err);\n\n          callback = () => {};\n        } else {\n          index++;\n          results[position] = result;\n\n          if (index >= arr.length) {\n            callback(null, results);\n          }\n        }\n      });\n    });\n  },\n\n  linkBytecode(bytecode, links) {\n    Object.keys(links).forEach(library_name => {\n      const library_address = links[library_name];\n      const regex = new RegExp(`__${library_name}_+`, \"g\");\n      bytecode = bytecode.replace(regex, library_address.replace(\"0x\", \"\"));\n    });\n    return bytecode;\n  },\n\n  // Extracts optional tx params from a list of fn arguments\n  getTxParams(methodABI, args) {\n    const constructor = this;\n    const expected_arg_count = methodABI ? methodABI.inputs.length : 0;\n    let tx_params = {};\n    const last_arg = args[args.length - 1];\n\n    if (args.length === expected_arg_count + 1 && Utils.is_tx_params(last_arg)) {\n      tx_params = args.pop();\n    }\n\n    return Utils.merge(constructor.class_defaults, tx_params);\n  },\n\n  // Verifies that a contracts libraries have been linked correctly.\n  // Throws on error\n  checkLibraries() {\n    const constructor = this;\n    const regex = /__[^_]+_+/g;\n    let unlinked_libraries = constructor.binary.match(regex);\n\n    if (unlinked_libraries !== null) {\n      unlinked_libraries = unlinked_libraries.map((name // Remove underscores\n      ) => name.replace(/_/g, \"\")).sort().filter((name, index, arr) => {\n        // Remove duplicates\n        if (index + 1 >= arr.length) {\n          return true;\n        }\n\n        return name !== arr[index + 1];\n      }).join(\", \");\n      const error = `${constructor.contractName} contains unresolved libraries. You must deploy and link the following libraries before you can deploy a new version of ${constructor.contractName}: ${unlinked_libraries}`;\n      throw new Error(error);\n    }\n  },\n\n  convertToEthersBN(original) {\n    const converted = [];\n    original.forEach(item => {\n      // Recurse for arrays\n      if (Array.isArray(item)) {\n        converted.push(Utils.convertToEthersBN(item)); // Convert Web3 BN / BigNumber\n      } else if (Utils.is_big_number(item)) {\n        const ethersBN = bigNumberify(item.toString());\n        converted.push(ethersBN);\n      } else {\n        converted.push(item);\n      }\n    });\n    return converted;\n  },\n\n  bigNumberify,\n\n  /**\r\n   * Multiplies an ethers.js BigNumber and a number with decimal places using\r\n   * integer math rather than using an arbitrary floating-point library like\r\n   * `bignumber.js`.\r\n   * @param  {BigNumber} bignum            an ethers.js BigNumber (use bigNumberify)\r\n   * @param  {Number}    decimal           a number which has 0+ decimal places\r\n   * @param  {Number}    [maxPrecision=5]  the max number of signficant figures\r\n   *                                       `decimal` can have. (default: 5)\r\n   * @return {BigNumber}                   floor(bignum * decimal)\r\n   */\n  multiplyBigNumberByDecimal(bignum, decimal, maxPrecision) {\n    if (typeof maxPrecision === \"undefined\") {\n      maxPrecision = 5;\n    }\n\n    const significantFigures = Math.min(decimal.toString().length - 1, // length less one because `.`\n    maxPrecision);\n    const denominator = bigNumberify(10).pow(significantFigures);\n    const numerator = Math.round(decimal * denominator);\n    const secondOperand = bigNumberify(numerator).div(denominator);\n    return bignum.mul(secondOperand);\n  },\n\n  // checks if given contract instance has a set provider\n  checkProvider(_ref) {\n    let {\n      currentProvider,\n      contractName\n    } = _ref;\n    if (!currentProvider) throw new Error(`${contractName} error: Please call setProvider() first before calling new().`);\n  },\n\n  // verifies current network has been assigned to contract instance\n  checkNetworkArtifactMatch(_ref2) {\n    let {\n      networks,\n      network_id,\n      contractName\n    } = _ref2;\n    if (networks[network_id] == null) throw new Error(`${contractName} has not been deployed to detected network (network/artifact mismatch)`);\n  },\n\n  // verifies contract instance has been deployed\n  checkDeployment(_ref3) {\n    let {\n      isDeployed,\n      contractName,\n      network_id\n    } = _ref3;\n    if (!isDeployed()) throw new Error(`${contractName} has not been deployed to detected network (${network_id})`);\n  },\n\n  // checks if provided contract address has on-chain code\n  checkCode(onChainCode, contractName, address) {\n    if (!onChainCode || onChainCode.replace(\"0x\", \"\").replace(/0/g, \"\") === \"\") throw new Error(`Cannot create instance of ${contractName}; no code at address ${address}`);\n  },\n\n  // parses known contract instance networks\n  parseKnownNetworks(_ref4, gasLimit) {\n    let {\n      networks,\n      currentProvider,\n      setNetwork,\n      network_id\n    } = _ref4;\n    // wrap uri matching in a promise to allow provider.send time to resolve\n    // (.send call happens in BlockchainUtils.matches)\n    return new Promise((accept, reject) => {\n      // go through all the networks that are listed as\n      // blockchain uris and see if they match\n      const uris = Object.keys(networks).filter(network => network.indexOf(\"blockchain://\") === 0);\n      const matches = uris.map(uri => BlockchainUtils.matches.bind(BlockchainUtils, uri, currentProvider));\n      Utils.parallel(matches, (err, results) => {\n        if (err) reject(err);\n\n        for (let i = 0; i < results.length; i++) {\n          if (results[i]) {\n            setNetwork(uris[i]);\n            accept({\n              id: network_id,\n              blockLimit: gasLimit\n            });\n          }\n        } // no match found!\n\n\n        accept(false);\n      });\n    });\n  },\n\n  // sets a contract instance network ID\n  async setInstanceNetworkID(TruffleContractInstance, chainNetworkID, gasLimit) {\n    // if chainNetworkID already present as network configuration, use it\n    if (TruffleContractInstance.hasNetwork(chainNetworkID)) {\n      TruffleContractInstance.setNetwork(chainNetworkID);\n      return {\n        id: TruffleContractInstance.network_id,\n        blockLimit: gasLimit\n      };\n    } // chainNetworkID not present,\n    // parse all known networks\n\n\n    const matchedNetwork = await Utils.parseKnownNetworks(TruffleContractInstance, gasLimit);\n    if (matchedNetwork) return matchedNetwork; // network unknown, trust the provider and use given chainNetworkID\n\n    TruffleContractInstance.setNetwork(chainNetworkID);\n    return {\n      id: TruffleContractInstance.network_id,\n      blockLimit: gasLimit\n    };\n  }\n\n};\nmodule.exports = Utils;","map":{"version":3,"names":["debug","require","web3Utils","bigNumberify","abi","BlockchainUtils","reformat","Utils","is_object","val","Array","isArray","is_big_number","isBN","isBigNumber","is_tx_params","allowed_fields","from","to","gas","gasPrice","value","data","nonce","privateFor","field_name","Object","keys","decodeLogs","_logs","isSingle","constructor","logs","toTruffleLog","map","log","logABI","events","topics","copy","merge","event","name","anonymous","slice","logArgs","decodeLog","inputs","_","args","numbers","call","filter","temp","push","raw","forEach","merged","prototype","arguments","i","length","object","j","key","parallel","arr","callback","index","results","fn","position","err","result","linkBytecode","bytecode","links","library_name","library_address","regex","RegExp","replace","getTxParams","methodABI","expected_arg_count","tx_params","last_arg","pop","class_defaults","checkLibraries","unlinked_libraries","binary","match","sort","join","error","contractName","Error","convertToEthersBN","original","converted","item","ethersBN","toString","multiplyBigNumberByDecimal","bignum","decimal","maxPrecision","significantFigures","Math","min","denominator","pow","numerator","round","secondOperand","div","mul","checkProvider","currentProvider","checkNetworkArtifactMatch","networks","network_id","checkDeployment","isDeployed","checkCode","onChainCode","address","parseKnownNetworks","gasLimit","setNetwork","Promise","accept","reject","uris","network","indexOf","matches","uri","bind","id","blockLimit","setInstanceNetworkID","TruffleContractInstance","chainNetworkID","hasNetwork","matchedNetwork","module","exports"],"sources":["D:/BlockchainSafetyManagement/client/node_modules/truffle-contract/lib/utils.js"],"sourcesContent":["const debug = require(\"debug\")(\"contract:utils\"); // eslint-disable-line no-unused-vars\r\nconst web3Utils = require(\"web3-utils\");\r\nconst bigNumberify = require(\"ethers/utils/bignumber\").bigNumberify;\r\nconst abi = require(\"web3-eth-abi\");\r\nconst BlockchainUtils = require(\"@truffle/blockchain-utils\");\r\nconst reformat = require(\"./reformat\");\r\n\r\nconst Utils = {\r\n  is_object(val) {\r\n    return typeof val === \"object\" && !Array.isArray(val);\r\n  },\r\n\r\n  is_big_number(val) {\r\n    if (typeof val !== \"object\") return false;\r\n\r\n    return web3Utils.isBN(val) || web3Utils.isBigNumber(val);\r\n  },\r\n\r\n  is_tx_params(val) {\r\n    if (!Utils.is_object(val)) return false;\r\n    if (Utils.is_big_number(val)) return false;\r\n\r\n    const allowed_fields = {\r\n      from: true,\r\n      to: true,\r\n      gas: true,\r\n      gasPrice: true,\r\n      value: true,\r\n      data: true,\r\n      nonce: true,\r\n      privateFor: true\r\n    };\r\n\r\n    for (let field_name of Object.keys(val)) {\r\n      if (allowed_fields[field_name]) return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  decodeLogs(_logs, isSingle) {\r\n    const constructor = this;\r\n    const logs = Utils.toTruffleLog(_logs, isSingle);\r\n\r\n    return logs\r\n      .map(log => {\r\n        const logABI = constructor.events[log.topics[0]];\r\n\r\n        if (logABI == null) {\r\n          return null;\r\n        }\r\n\r\n        const copy = Utils.merge({}, log);\r\n\r\n        copy.event = logABI.name;\r\n        copy.topics = logABI.anonymous ? copy.topics : copy.topics.slice(1);\r\n\r\n        if (copy.data === \"0x\") {\r\n          copy.data = \"\";\r\n        }\r\n\r\n        let logArgs;\r\n        try {\r\n          logArgs = abi.decodeLog(logABI.inputs, copy.data, copy.topics);\r\n        } catch (_) {\r\n          return null;\r\n        }\r\n        copy.args = reformat.numbers.call(constructor, logArgs, logABI.inputs);\r\n\r\n        delete copy.data;\r\n        delete copy.topics;\r\n\r\n        return copy;\r\n      })\r\n      .filter(log => log != null);\r\n  },\r\n\r\n  toTruffleLog(events, isSingle) {\r\n    // Transform singletons (from event listeners) to the kind of\r\n    // object we find on the receipt\r\n    if (isSingle && typeof isSingle === \"boolean\") {\r\n      const temp = [];\r\n      temp.push(events);\r\n      return temp.map(log => {\r\n        log.data = log.raw.data;\r\n        log.topics = log.raw.topics;\r\n        return log;\r\n      });\r\n    }\r\n\r\n    // Or reformat items in the existing array\r\n    events.forEach(event => {\r\n      if (event.raw) {\r\n        event.data = event.raw.data;\r\n        event.topics = event.raw.topics;\r\n      }\r\n    });\r\n\r\n    return events;\r\n  },\r\n\r\n  merge() {\r\n    const merged = {};\r\n    const args = Array.prototype.slice.call(arguments);\r\n\r\n    for (let i = 0; i < args.length; i++) {\r\n      const object = args[i];\r\n      const keys = Object.keys(object);\r\n      for (let j = 0; j < keys.length; j++) {\r\n        const key = keys[j];\r\n        const value = object[key];\r\n        merged[key] = value;\r\n      }\r\n    }\r\n\r\n    return merged;\r\n  },\r\n  parallel(arr, callback = () => {}) {\r\n    if (!arr.length) {\r\n      return callback(null, []);\r\n    }\r\n    let index = 0;\r\n    const results = new Array(arr.length);\r\n    arr.forEach((fn, position) => {\r\n      fn((err, result) => {\r\n        if (err) {\r\n          callback(err);\r\n          callback = () => {};\r\n        } else {\r\n          index++;\r\n          results[position] = result;\r\n          if (index >= arr.length) {\r\n            callback(null, results);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  },\r\n\r\n  linkBytecode(bytecode, links) {\r\n    Object.keys(links).forEach(library_name => {\r\n      const library_address = links[library_name];\r\n      const regex = new RegExp(`__${library_name}_+`, \"g\");\r\n\r\n      bytecode = bytecode.replace(regex, library_address.replace(\"0x\", \"\"));\r\n    });\r\n\r\n    return bytecode;\r\n  },\r\n\r\n  // Extracts optional tx params from a list of fn arguments\r\n  getTxParams(methodABI, args) {\r\n    const constructor = this;\r\n\r\n    const expected_arg_count = methodABI ? methodABI.inputs.length : 0;\r\n\r\n    let tx_params = {};\r\n    const last_arg = args[args.length - 1];\r\n\r\n    if (\r\n      args.length === expected_arg_count + 1 &&\r\n      Utils.is_tx_params(last_arg)\r\n    ) {\r\n      tx_params = args.pop();\r\n    }\r\n\r\n    return Utils.merge(constructor.class_defaults, tx_params);\r\n  },\r\n\r\n  // Verifies that a contracts libraries have been linked correctly.\r\n  // Throws on error\r\n  checkLibraries() {\r\n    const constructor = this;\r\n    const regex = /__[^_]+_+/g;\r\n    let unlinked_libraries = constructor.binary.match(regex);\r\n\r\n    if (unlinked_libraries !== null) {\r\n      unlinked_libraries = unlinked_libraries\r\n        .map((\r\n          name // Remove underscores\r\n        ) => name.replace(/_/g, \"\"))\r\n        .sort()\r\n        .filter((name, index, arr) => {\r\n          // Remove duplicates\r\n          if (index + 1 >= arr.length) {\r\n            return true;\r\n          }\r\n\r\n          return name !== arr[index + 1];\r\n        })\r\n        .join(\", \");\r\n\r\n      const error = `${\r\n        constructor.contractName\r\n      } contains unresolved libraries. You must deploy and link the following libraries before you can deploy a new version of ${\r\n        constructor.contractName\r\n      }: ${unlinked_libraries}`;\r\n\r\n      throw new Error(error);\r\n    }\r\n  },\r\n\r\n  convertToEthersBN(original) {\r\n    const converted = [];\r\n    original.forEach(item => {\r\n      // Recurse for arrays\r\n      if (Array.isArray(item)) {\r\n        converted.push(Utils.convertToEthersBN(item));\r\n\r\n        // Convert Web3 BN / BigNumber\r\n      } else if (Utils.is_big_number(item)) {\r\n        const ethersBN = bigNumberify(item.toString());\r\n        converted.push(ethersBN);\r\n      } else {\r\n        converted.push(item);\r\n      }\r\n    });\r\n    return converted;\r\n  },\r\n\r\n  bigNumberify,\r\n\r\n  /**\r\n   * Multiplies an ethers.js BigNumber and a number with decimal places using\r\n   * integer math rather than using an arbitrary floating-point library like\r\n   * `bignumber.js`.\r\n   * @param  {BigNumber} bignum            an ethers.js BigNumber (use bigNumberify)\r\n   * @param  {Number}    decimal           a number which has 0+ decimal places\r\n   * @param  {Number}    [maxPrecision=5]  the max number of signficant figures\r\n   *                                       `decimal` can have. (default: 5)\r\n   * @return {BigNumber}                   floor(bignum * decimal)\r\n   */\r\n  multiplyBigNumberByDecimal(bignum, decimal, maxPrecision) {\r\n    if (typeof maxPrecision === \"undefined\") {\r\n      maxPrecision = 5;\r\n    }\r\n\r\n    const significantFigures = Math.min(\r\n      decimal.toString().length - 1, // length less one because `.`\r\n      maxPrecision\r\n    );\r\n\r\n    const denominator = bigNumberify(10).pow(significantFigures);\r\n    const numerator = Math.round(decimal * denominator);\r\n    const secondOperand = bigNumberify(numerator).div(denominator);\r\n\r\n    return bignum.mul(secondOperand);\r\n  },\r\n\r\n  // checks if given contract instance has a set provider\r\n  checkProvider({ currentProvider, contractName }) {\r\n    if (!currentProvider)\r\n      throw new Error(\r\n        `${contractName} error: Please call setProvider() first before calling new().`\r\n      );\r\n  },\r\n\r\n  // verifies current network has been assigned to contract instance\r\n  checkNetworkArtifactMatch({ networks, network_id, contractName }) {\r\n    if (networks[network_id] == null)\r\n      throw new Error(\r\n        `${contractName} has not been deployed to detected network (network/artifact mismatch)`\r\n      );\r\n  },\r\n\r\n  // verifies contract instance has been deployed\r\n  checkDeployment({ isDeployed, contractName, network_id }) {\r\n    if (!isDeployed())\r\n      throw new Error(\r\n        `${contractName} has not been deployed to detected network (${network_id})`\r\n      );\r\n  },\r\n\r\n  // checks if provided contract address has on-chain code\r\n  checkCode(onChainCode, contractName, address) {\r\n    if (!onChainCode || onChainCode.replace(\"0x\", \"\").replace(/0/g, \"\") === \"\")\r\n      throw new Error(\r\n        `Cannot create instance of ${contractName}; no code at address ${address}`\r\n      );\r\n  },\r\n\r\n  // parses known contract instance networks\r\n  parseKnownNetworks(\r\n    { networks, currentProvider, setNetwork, network_id },\r\n    gasLimit\r\n  ) {\r\n    // wrap uri matching in a promise to allow provider.send time to resolve\r\n    // (.send call happens in BlockchainUtils.matches)\r\n    return new Promise((accept, reject) => {\r\n      // go through all the networks that are listed as\r\n      // blockchain uris and see if they match\r\n      const uris = Object.keys(networks).filter(\r\n        network => network.indexOf(\"blockchain://\") === 0\r\n      );\r\n      const matches = uris.map(uri =>\r\n        BlockchainUtils.matches.bind(BlockchainUtils, uri, currentProvider)\r\n      );\r\n\r\n      Utils.parallel(matches, (err, results) => {\r\n        if (err) reject(err);\r\n\r\n        for (let i = 0; i < results.length; i++) {\r\n          if (results[i]) {\r\n            setNetwork(uris[i]);\r\n            accept({\r\n              id: network_id,\r\n              blockLimit: gasLimit\r\n            });\r\n          }\r\n        }\r\n        // no match found!\r\n        accept(false);\r\n      });\r\n    });\r\n  },\r\n\r\n  // sets a contract instance network ID\r\n  async setInstanceNetworkID(\r\n    TruffleContractInstance,\r\n    chainNetworkID,\r\n    gasLimit\r\n  ) {\r\n    // if chainNetworkID already present as network configuration, use it\r\n    if (TruffleContractInstance.hasNetwork(chainNetworkID)) {\r\n      TruffleContractInstance.setNetwork(chainNetworkID);\r\n      return {\r\n        id: TruffleContractInstance.network_id,\r\n        blockLimit: gasLimit\r\n      };\r\n    }\r\n    // chainNetworkID not present,\r\n    // parse all known networks\r\n    const matchedNetwork = await Utils.parseKnownNetworks(\r\n      TruffleContractInstance,\r\n      gasLimit\r\n    );\r\n    if (matchedNetwork) return matchedNetwork;\r\n\r\n    // network unknown, trust the provider and use given chainNetworkID\r\n    TruffleContractInstance.setNetwork(chainNetworkID);\r\n    return { id: TruffleContractInstance.network_id, blockLimit: gasLimit };\r\n  }\r\n};\r\n\r\nmodule.exports = Utils;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}