{"ast":null,"code":"// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;","map":{"version":3,"names":["ERR_STREAM_PREMATURE_CLOSE","require","codes","once","callback","called","_len","arguments","length","args","Array","_key","apply","noop","isRequest","stream","setHeader","abort","eos","opts","readable","writable","onlegacyfinish","onfinish","writableEnded","_writableState","finished","call","readableEnded","_readableState","endEmitted","onend","onerror","err","onclose","ended","onrequest","req","on","error","removeListener","module","exports"],"sources":["C:/Users/mcnl/Desktop/gong/BlockchainSafetyManagement/client/node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"],"sourcesContent":["// Ported from https://github.com/mafintosh/end-of-stream with\r\n// permission from the author, Mathias Buus (@mafintosh).\r\n'use strict';\r\n\r\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\r\n\r\nfunction once(callback) {\r\n  var called = false;\r\n  return function () {\r\n    if (called) return;\r\n    called = true;\r\n\r\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    callback.apply(this, args);\r\n  };\r\n}\r\n\r\nfunction noop() {}\r\n\r\nfunction isRequest(stream) {\r\n  return stream.setHeader && typeof stream.abort === 'function';\r\n}\r\n\r\nfunction eos(stream, opts, callback) {\r\n  if (typeof opts === 'function') return eos(stream, null, opts);\r\n  if (!opts) opts = {};\r\n  callback = once(callback || noop);\r\n  var readable = opts.readable || opts.readable !== false && stream.readable;\r\n  var writable = opts.writable || opts.writable !== false && stream.writable;\r\n\r\n  var onlegacyfinish = function onlegacyfinish() {\r\n    if (!stream.writable) onfinish();\r\n  };\r\n\r\n  var writableEnded = stream._writableState && stream._writableState.finished;\r\n\r\n  var onfinish = function onfinish() {\r\n    writable = false;\r\n    writableEnded = true;\r\n    if (!readable) callback.call(stream);\r\n  };\r\n\r\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\r\n\r\n  var onend = function onend() {\r\n    readable = false;\r\n    readableEnded = true;\r\n    if (!writable) callback.call(stream);\r\n  };\r\n\r\n  var onerror = function onerror(err) {\r\n    callback.call(stream, err);\r\n  };\r\n\r\n  var onclose = function onclose() {\r\n    var err;\r\n\r\n    if (readable && !readableEnded) {\r\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\r\n      return callback.call(stream, err);\r\n    }\r\n\r\n    if (writable && !writableEnded) {\r\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\r\n      return callback.call(stream, err);\r\n    }\r\n  };\r\n\r\n  var onrequest = function onrequest() {\r\n    stream.req.on('finish', onfinish);\r\n  };\r\n\r\n  if (isRequest(stream)) {\r\n    stream.on('complete', onfinish);\r\n    stream.on('abort', onclose);\r\n    if (stream.req) onrequest();else stream.on('request', onrequest);\r\n  } else if (writable && !stream._writableState) {\r\n    // legacy streams\r\n    stream.on('end', onlegacyfinish);\r\n    stream.on('close', onlegacyfinish);\r\n  }\r\n\r\n  stream.on('end', onend);\r\n  stream.on('finish', onfinish);\r\n  if (opts.error !== false) stream.on('error', onerror);\r\n  stream.on('close', onclose);\r\n  return function () {\r\n    stream.removeListener('complete', onfinish);\r\n    stream.removeListener('abort', onclose);\r\n    stream.removeListener('request', onrequest);\r\n    if (stream.req) stream.req.removeListener('finish', onfinish);\r\n    stream.removeListener('end', onlegacyfinish);\r\n    stream.removeListener('close', onlegacyfinish);\r\n    stream.removeListener('finish', onfinish);\r\n    stream.removeListener('end', onend);\r\n    stream.removeListener('error', onerror);\r\n    stream.removeListener('close', onclose);\r\n  };\r\n}\r\n\r\nmodule.exports = eos;"],"mappings":"AAAA;AACA;AACA;;AAEA,IAAIA,0BAA0B,GAAGC,OAAO,CAAC,iBAAD,CAAP,CAA2BC,KAA3B,CAAiCF,0BAAlE;;AAEA,SAASG,IAAT,CAAcC,QAAd,EAAwB;EACtB,IAAIC,MAAM,GAAG,KAAb;EACA,OAAO,YAAY;IACjB,IAAIA,MAAJ,EAAY;IACZA,MAAM,GAAG,IAAT;;IAEA,KAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;MACvFF,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;IACD;;IAEDP,QAAQ,CAACQ,KAAT,CAAe,IAAf,EAAqBH,IAArB;EACD,CATD;AAUD;;AAED,SAASI,IAAT,GAAgB,CAAE;;AAElB,SAASC,SAAT,CAAmBC,MAAnB,EAA2B;EACzB,OAAOA,MAAM,CAACC,SAAP,IAAoB,OAAOD,MAAM,CAACE,KAAd,KAAwB,UAAnD;AACD;;AAED,SAASC,GAAT,CAAaH,MAAb,EAAqBI,IAArB,EAA2Bf,QAA3B,EAAqC;EACnC,IAAI,OAAOe,IAAP,KAAgB,UAApB,EAAgC,OAAOD,GAAG,CAACH,MAAD,EAAS,IAAT,EAAeI,IAAf,CAAV;EAChC,IAAI,CAACA,IAAL,EAAWA,IAAI,GAAG,EAAP;EACXf,QAAQ,GAAGD,IAAI,CAACC,QAAQ,IAAIS,IAAb,CAAf;EACA,IAAIO,QAAQ,GAAGD,IAAI,CAACC,QAAL,IAAiBD,IAAI,CAACC,QAAL,KAAkB,KAAlB,IAA2BL,MAAM,CAACK,QAAlE;EACA,IAAIC,QAAQ,GAAGF,IAAI,CAACE,QAAL,IAAiBF,IAAI,CAACE,QAAL,KAAkB,KAAlB,IAA2BN,MAAM,CAACM,QAAlE;;EAEA,IAAIC,cAAc,GAAG,SAASA,cAAT,GAA0B;IAC7C,IAAI,CAACP,MAAM,CAACM,QAAZ,EAAsBE,QAAQ;EAC/B,CAFD;;EAIA,IAAIC,aAAa,GAAGT,MAAM,CAACU,cAAP,IAAyBV,MAAM,CAACU,cAAP,CAAsBC,QAAnE;;EAEA,IAAIH,QAAQ,GAAG,SAASA,QAAT,GAAoB;IACjCF,QAAQ,GAAG,KAAX;IACAG,aAAa,GAAG,IAAhB;IACA,IAAI,CAACJ,QAAL,EAAehB,QAAQ,CAACuB,IAAT,CAAcZ,MAAd;EAChB,CAJD;;EAMA,IAAIa,aAAa,GAAGb,MAAM,CAACc,cAAP,IAAyBd,MAAM,CAACc,cAAP,CAAsBC,UAAnE;;EAEA,IAAIC,KAAK,GAAG,SAASA,KAAT,GAAiB;IAC3BX,QAAQ,GAAG,KAAX;IACAQ,aAAa,GAAG,IAAhB;IACA,IAAI,CAACP,QAAL,EAAejB,QAAQ,CAACuB,IAAT,CAAcZ,MAAd;EAChB,CAJD;;EAMA,IAAIiB,OAAO,GAAG,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;IAClC7B,QAAQ,CAACuB,IAAT,CAAcZ,MAAd,EAAsBkB,GAAtB;EACD,CAFD;;EAIA,IAAIC,OAAO,GAAG,SAASA,OAAT,GAAmB;IAC/B,IAAID,GAAJ;;IAEA,IAAIb,QAAQ,IAAI,CAACQ,aAAjB,EAAgC;MAC9B,IAAI,CAACb,MAAM,CAACc,cAAR,IAA0B,CAACd,MAAM,CAACc,cAAP,CAAsBM,KAArD,EAA4DF,GAAG,GAAG,IAAIjC,0BAAJ,EAAN;MAC5D,OAAOI,QAAQ,CAACuB,IAAT,CAAcZ,MAAd,EAAsBkB,GAAtB,CAAP;IACD;;IAED,IAAIZ,QAAQ,IAAI,CAACG,aAAjB,EAAgC;MAC9B,IAAI,CAACT,MAAM,CAACU,cAAR,IAA0B,CAACV,MAAM,CAACU,cAAP,CAAsBU,KAArD,EAA4DF,GAAG,GAAG,IAAIjC,0BAAJ,EAAN;MAC5D,OAAOI,QAAQ,CAACuB,IAAT,CAAcZ,MAAd,EAAsBkB,GAAtB,CAAP;IACD;EACF,CAZD;;EAcA,IAAIG,SAAS,GAAG,SAASA,SAAT,GAAqB;IACnCrB,MAAM,CAACsB,GAAP,CAAWC,EAAX,CAAc,QAAd,EAAwBf,QAAxB;EACD,CAFD;;EAIA,IAAIT,SAAS,CAACC,MAAD,CAAb,EAAuB;IACrBA,MAAM,CAACuB,EAAP,CAAU,UAAV,EAAsBf,QAAtB;IACAR,MAAM,CAACuB,EAAP,CAAU,OAAV,EAAmBJ,OAAnB;IACA,IAAInB,MAAM,CAACsB,GAAX,EAAgBD,SAAS,GAAzB,KAAiCrB,MAAM,CAACuB,EAAP,CAAU,SAAV,EAAqBF,SAArB;EAClC,CAJD,MAIO,IAAIf,QAAQ,IAAI,CAACN,MAAM,CAACU,cAAxB,EAAwC;IAC7C;IACAV,MAAM,CAACuB,EAAP,CAAU,KAAV,EAAiBhB,cAAjB;IACAP,MAAM,CAACuB,EAAP,CAAU,OAAV,EAAmBhB,cAAnB;EACD;;EAEDP,MAAM,CAACuB,EAAP,CAAU,KAAV,EAAiBP,KAAjB;EACAhB,MAAM,CAACuB,EAAP,CAAU,QAAV,EAAoBf,QAApB;EACA,IAAIJ,IAAI,CAACoB,KAAL,KAAe,KAAnB,EAA0BxB,MAAM,CAACuB,EAAP,CAAU,OAAV,EAAmBN,OAAnB;EAC1BjB,MAAM,CAACuB,EAAP,CAAU,OAAV,EAAmBJ,OAAnB;EACA,OAAO,YAAY;IACjBnB,MAAM,CAACyB,cAAP,CAAsB,UAAtB,EAAkCjB,QAAlC;IACAR,MAAM,CAACyB,cAAP,CAAsB,OAAtB,EAA+BN,OAA/B;IACAnB,MAAM,CAACyB,cAAP,CAAsB,SAAtB,EAAiCJ,SAAjC;IACA,IAAIrB,MAAM,CAACsB,GAAX,EAAgBtB,MAAM,CAACsB,GAAP,CAAWG,cAAX,CAA0B,QAA1B,EAAoCjB,QAApC;IAChBR,MAAM,CAACyB,cAAP,CAAsB,KAAtB,EAA6BlB,cAA7B;IACAP,MAAM,CAACyB,cAAP,CAAsB,OAAtB,EAA+BlB,cAA/B;IACAP,MAAM,CAACyB,cAAP,CAAsB,QAAtB,EAAgCjB,QAAhC;IACAR,MAAM,CAACyB,cAAP,CAAsB,KAAtB,EAA6BT,KAA7B;IACAhB,MAAM,CAACyB,cAAP,CAAsB,OAAtB,EAA+BR,OAA/B;IACAjB,MAAM,CAACyB,cAAP,CAAsB,OAAtB,EAA+BN,OAA/B;EACD,CAXD;AAYD;;AAEDO,MAAM,CAACC,OAAP,GAAiBxB,GAAjB"},"metadata":{},"sourceType":"script"}