{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"/home/ubuntu/SafetyManagement_UI/client/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/ubuntu/SafetyManagement_UI/client/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar byteUtils = require('./byte-utils.js');\n\nvar defaultChunkSize = 256;\n\nvar Bl = /*#__PURE__*/function () {\n  function Bl() {\n    var chunkSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultChunkSize;\n\n    _classCallCheck(this, Bl);\n\n    this.chunkSize = chunkSize;\n    this.cursor = 0;\n    this.maxCursor = -1;\n    this.chunks = [];\n    this._initReuseChunk = null;\n  }\n\n  _createClass(Bl, [{\n    key: \"reset\",\n    value: function reset() {\n      this.cursor = 0;\n      this.maxCursor = -1;\n\n      if (this.chunks.length) {\n        this.chunks = [];\n      }\n\n      if (this._initReuseChunk !== null) {\n        this.chunks.push(this._initReuseChunk);\n        this.maxCursor = this._initReuseChunk.length - 1;\n      }\n    }\n  }, {\n    key: \"push\",\n    value: function push(bytes) {\n      var topChunk = this.chunks[this.chunks.length - 1];\n      var newMax = this.cursor + bytes.length;\n\n      if (newMax <= this.maxCursor + 1) {\n        var chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n        topChunk.set(bytes, chunkPos);\n      } else {\n        if (topChunk) {\n          var _chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n\n          if (_chunkPos < topChunk.length) {\n            this.chunks[this.chunks.length - 1] = topChunk.subarray(0, _chunkPos);\n            this.maxCursor = this.cursor - 1;\n          }\n        }\n\n        if (bytes.length < 64 && bytes.length < this.chunkSize) {\n          topChunk = byteUtils.alloc(this.chunkSize);\n          this.chunks.push(topChunk);\n          this.maxCursor += topChunk.length;\n\n          if (this._initReuseChunk === null) {\n            this._initReuseChunk = topChunk;\n          }\n\n          topChunk.set(bytes, 0);\n        } else {\n          this.chunks.push(bytes);\n          this.maxCursor += bytes.length;\n        }\n      }\n\n      this.cursor += bytes.length;\n    }\n  }, {\n    key: \"toBytes\",\n    value: function toBytes() {\n      var reset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var byts;\n\n      if (this.chunks.length === 1) {\n        var chunk = this.chunks[0];\n\n        if (reset && this.cursor > chunk.length / 2) {\n          byts = this.cursor === chunk.length ? chunk : chunk.subarray(0, this.cursor);\n          this._initReuseChunk = null;\n          this.chunks = [];\n        } else {\n          byts = byteUtils.slice(chunk, 0, this.cursor);\n        }\n      } else {\n        byts = byteUtils.concat(this.chunks, this.cursor);\n      }\n\n      if (reset) {\n        this.reset();\n      }\n\n      return byts;\n    }\n  }]);\n\n  return Bl;\n}();\n\nexports.Bl = Bl;","map":{"version":3,"names":["Object","defineProperty","exports","value","byteUtils","require","defaultChunkSize","Bl","chunkSize","cursor","maxCursor","chunks","_initReuseChunk","length","push","bytes","topChunk","newMax","chunkPos","set","subarray","alloc","reset","byts","chunk","slice","concat"],"sources":["/home/ubuntu/SafetyManagement_UI/client/node_modules/cborg/cjs/lib/bl.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar byteUtils = require('./byte-utils.js');\n\nconst defaultChunkSize = 256;\nclass Bl {\n  constructor(chunkSize = defaultChunkSize) {\n    this.chunkSize = chunkSize;\n    this.cursor = 0;\n    this.maxCursor = -1;\n    this.chunks = [];\n    this._initReuseChunk = null;\n  }\n  reset() {\n    this.cursor = 0;\n    this.maxCursor = -1;\n    if (this.chunks.length) {\n      this.chunks = [];\n    }\n    if (this._initReuseChunk !== null) {\n      this.chunks.push(this._initReuseChunk);\n      this.maxCursor = this._initReuseChunk.length - 1;\n    }\n  }\n  push(bytes) {\n    let topChunk = this.chunks[this.chunks.length - 1];\n    const newMax = this.cursor + bytes.length;\n    if (newMax <= this.maxCursor + 1) {\n      const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n      topChunk.set(bytes, chunkPos);\n    } else {\n      if (topChunk) {\n        const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n        if (chunkPos < topChunk.length) {\n          this.chunks[this.chunks.length - 1] = topChunk.subarray(0, chunkPos);\n          this.maxCursor = this.cursor - 1;\n        }\n      }\n      if (bytes.length < 64 && bytes.length < this.chunkSize) {\n        topChunk = byteUtils.alloc(this.chunkSize);\n        this.chunks.push(topChunk);\n        this.maxCursor += topChunk.length;\n        if (this._initReuseChunk === null) {\n          this._initReuseChunk = topChunk;\n        }\n        topChunk.set(bytes, 0);\n      } else {\n        this.chunks.push(bytes);\n        this.maxCursor += bytes.length;\n      }\n    }\n    this.cursor += bytes.length;\n  }\n  toBytes(reset = false) {\n    let byts;\n    if (this.chunks.length === 1) {\n      const chunk = this.chunks[0];\n      if (reset && this.cursor > chunk.length / 2) {\n        byts = this.cursor === chunk.length ? chunk : chunk.subarray(0, this.cursor);\n        this._initReuseChunk = null;\n        this.chunks = [];\n      } else {\n        byts = byteUtils.slice(chunk, 0, this.cursor);\n      }\n    } else {\n      byts = byteUtils.concat(this.chunks, this.cursor);\n    }\n    if (reset) {\n      this.reset();\n    }\n    return byts;\n  }\n}\n\nexports.Bl = Bl;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}