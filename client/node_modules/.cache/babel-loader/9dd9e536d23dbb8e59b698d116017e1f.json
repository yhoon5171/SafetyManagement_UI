{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nclass SubscriptionTracker {\n  constructor() {\n    this._subs = new Map();\n  }\n\n  subscribe(topic, handler, signal) {\n    const topicSubs = this._subs.get(topic) || [];\n\n    if (topicSubs.find(s => s.handler === handler)) {\n      throw new Error(`Already subscribed to ${topic} with this handler`);\n    }\n\n    const controller = new AbortController();\n\n    this._subs.set(topic, [{\n      handler,\n      controller\n    }].concat(topicSubs));\n\n    if (signal) {\n      signal.addEventListener('abort', () => this.unsubscribe(topic, handler));\n    }\n\n    return controller.signal;\n  }\n\n  unsubscribe(topic, handler) {\n    const subs = this._subs.get(topic) || [];\n    let unsubs;\n\n    if (handler) {\n      this._subs.set(topic, subs.filter(s => s.handler !== handler));\n\n      unsubs = subs.filter(s => s.handler === handler);\n    } else {\n      this._subs.set(topic, []);\n\n      unsubs = subs;\n    }\n\n    if (!(this._subs.get(topic) || []).length) {\n      this._subs.delete(topic);\n    }\n\n    unsubs.forEach(s => s.controller.abort());\n  }\n\n}\n\nexports.SubscriptionTracker = SubscriptionTracker;","map":{"version":3,"names":["Object","defineProperty","exports","value","SubscriptionTracker","constructor","_subs","Map","subscribe","topic","handler","signal","topicSubs","get","find","s","Error","controller","AbortController","set","concat","addEventListener","unsubscribe","subs","unsubs","filter","length","delete","forEach","abort"],"sources":["C:/Users/Runner/Desktop/test1/SafetyManagement_UI/client/node_modules/ipfs-http-client/cjs/src/pubsub/subscription-tracker.js"],"sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nclass SubscriptionTracker {\r\n  constructor() {\r\n    this._subs = new Map();\r\n  }\r\n  subscribe(topic, handler, signal) {\r\n    const topicSubs = this._subs.get(topic) || [];\r\n    if (topicSubs.find(s => s.handler === handler)) {\r\n      throw new Error(`Already subscribed to ${ topic } with this handler`);\r\n    }\r\n    const controller = new AbortController();\r\n    this._subs.set(topic, [{\r\n        handler,\r\n        controller\r\n      }].concat(topicSubs));\r\n    if (signal) {\r\n      signal.addEventListener('abort', () => this.unsubscribe(topic, handler));\r\n    }\r\n    return controller.signal;\r\n  }\r\n  unsubscribe(topic, handler) {\r\n    const subs = this._subs.get(topic) || [];\r\n    let unsubs;\r\n    if (handler) {\r\n      this._subs.set(topic, subs.filter(s => s.handler !== handler));\r\n      unsubs = subs.filter(s => s.handler === handler);\r\n    } else {\r\n      this._subs.set(topic, []);\r\n      unsubs = subs;\r\n    }\r\n    if (!(this._subs.get(topic) || []).length) {\r\n      this._subs.delete(topic);\r\n    }\r\n    unsubs.forEach(s => s.controller.abort());\r\n  }\r\n}\r\n\r\nexports.SubscriptionTracker = SubscriptionTracker;\r\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AAEA,MAAMC,mBAAN,CAA0B;EACxBC,WAAW,GAAG;IACZ,KAAKC,KAAL,GAAa,IAAIC,GAAJ,EAAb;EACD;;EACDC,SAAS,CAACC,KAAD,EAAQC,OAAR,EAAiBC,MAAjB,EAAyB;IAChC,MAAMC,SAAS,GAAG,KAAKN,KAAL,CAAWO,GAAX,CAAeJ,KAAf,KAAyB,EAA3C;;IACA,IAAIG,SAAS,CAACE,IAAV,CAAeC,CAAC,IAAIA,CAAC,CAACL,OAAF,KAAcA,OAAlC,CAAJ,EAAgD;MAC9C,MAAM,IAAIM,KAAJ,CAAW,yBAAyBP,KAAO,oBAA3C,CAAN;IACD;;IACD,MAAMQ,UAAU,GAAG,IAAIC,eAAJ,EAAnB;;IACA,KAAKZ,KAAL,CAAWa,GAAX,CAAeV,KAAf,EAAsB,CAAC;MACnBC,OADmB;MAEnBO;IAFmB,CAAD,EAGjBG,MAHiB,CAGVR,SAHU,CAAtB;;IAIA,IAAID,MAAJ,EAAY;MACVA,MAAM,CAACU,gBAAP,CAAwB,OAAxB,EAAiC,MAAM,KAAKC,WAAL,CAAiBb,KAAjB,EAAwBC,OAAxB,CAAvC;IACD;;IACD,OAAOO,UAAU,CAACN,MAAlB;EACD;;EACDW,WAAW,CAACb,KAAD,EAAQC,OAAR,EAAiB;IAC1B,MAAMa,IAAI,GAAG,KAAKjB,KAAL,CAAWO,GAAX,CAAeJ,KAAf,KAAyB,EAAtC;IACA,IAAIe,MAAJ;;IACA,IAAId,OAAJ,EAAa;MACX,KAAKJ,KAAL,CAAWa,GAAX,CAAeV,KAAf,EAAsBc,IAAI,CAACE,MAAL,CAAYV,CAAC,IAAIA,CAAC,CAACL,OAAF,KAAcA,OAA/B,CAAtB;;MACAc,MAAM,GAAGD,IAAI,CAACE,MAAL,CAAYV,CAAC,IAAIA,CAAC,CAACL,OAAF,KAAcA,OAA/B,CAAT;IACD,CAHD,MAGO;MACL,KAAKJ,KAAL,CAAWa,GAAX,CAAeV,KAAf,EAAsB,EAAtB;;MACAe,MAAM,GAAGD,IAAT;IACD;;IACD,IAAI,CAAC,CAAC,KAAKjB,KAAL,CAAWO,GAAX,CAAeJ,KAAf,KAAyB,EAA1B,EAA8BiB,MAAnC,EAA2C;MACzC,KAAKpB,KAAL,CAAWqB,MAAX,CAAkBlB,KAAlB;IACD;;IACDe,MAAM,CAACI,OAAP,CAAeb,CAAC,IAAIA,CAAC,CAACE,UAAF,CAAaY,KAAb,EAApB;EACD;;AAjCuB;;AAoC1B3B,OAAO,CAACE,mBAAR,GAA8BA,mBAA9B"},"metadata":{},"sourceType":"script"}